<?xml version="1.0" encoding="UTF-8"?>
<job
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="urn:proactive:jobdescriptor:3.14" xsi:schemaLocation="urn:proactive:jobdescriptor:3.14 http://www.activeeon.com/public_content/schemas/proactive/jobdescriptor/3.14/schedulerjob.xsd"  name="Terraform_AWS_EC2_Instances" projectName="Terraform workflows" tags="Infrastructure as Code,IaC,Terraform,AWS" priority="normal" onTaskError="continueJobExecution"  maxNumberOfExecution="1"  >
  <variables>
    <variable name="AWS_ACCESS_KEY" value="my_aws_access_key" model="PA:NOT_EMPTY_STRING" description="AWS access key used by Terraform to connect to AWS EC2 services." group="AWS" advanced="false" hidden="false"/>
    <variable name="AWS_SECRET_KEY" value="$AWS_ACCESS_KEY" model="PA:CREDENTIAL" description="AWS secret key used by Terraform to connect to AWS EC2 services. Must be added to the third-party credentials vault." group="AWS" advanced="false" hidden="false"/>
    <variable name="AWS_AMI" value="ami-054e881150baee51a" model="PA:NOT_EMPTY_STRING" description="AWS Image for EC2 instances to be deployed" group="AWS" advanced="false" hidden="false"/>
    <variable name="AWS_INSTANCE_TYPE" value="t2.micro" model="PA:NOT_EMPTY_STRING" description="Instance size for the EC2 instances to be deployed (see &lt;a href=&#39;https://aws.amazon.com/fr/ec2/instance-types/&#39; target=_blank &gt;Instance size definitions&lt;/a&gt;)." group="AWS" advanced="false" hidden="false"/>
    <variable name="AWS_INSTANCES_NUMBER" value="2" model="PA:INTEGER" description="Number of AWS EC2 instances to be deployed" group="AWS" advanced="false" hidden="false"/>
  </variables>
  <description>
    <![CDATA[ A workflow that uses the Terraform IaC tool to deploy AWS EC2 instances. The workflow requires Docker or Terraform to be installed in the underlying host (where it will be executed). The workflow takes as input the Terraform file 'terraform_aws_ec2_instances.tf' stored in the bucket 'it-infrastructure-as-code'. The workflow deploys a number of AWS EC2 instances given as input, then waits for an action from the user to remove the deployed instances. ]]>
  </description>
  <genericInformation>
    <info name="bucketName" value="it-infrastructure-as-code"/>
    <info name="workflow.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/terraform.png"/>
    <info name="documentation" value="https://www.terraform.io/"/>
    <info name="group" value="public-objects"/>
  </genericInformation>
  <taskFlow>
    <task name="deploy-ec2-instances" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A bash task that prepares Terraform setup and files for the deployment of AWS EC2 instances, then executes Terraform commands to perform the deployment. ]]>
      </description>
      <genericInformation>
        <info name="PRE_SCRIPT_AS_FILE" value="terraform_aws_ec2_instances.tf"/>
      </genericInformation>
      <depends>
        <task ref="read_aws_access_credentials"/>
      </depends>
      <inputFiles>
        <files  includes="terraform/aws/terraform.tf" accessMode="transferFromGlobalSpace"/>
      </inputFiles>
      <pre>
        <script>
          <code language="bash">
            <![CDATA[
# Configure the AWS Provider
provider "aws" {
  region     = "eu-west-3"
  access_key = var.aws_access_key_id
  secret_key = var.aws_secret_access_key
}

variable "aws_access_key_id" {}
variable "aws_secret_access_key" {}
variable "aws_private_key" {}
variable "aws_keypair_name" {}
variable "aws_instances_count" {}
variable "aws_ami" {}
variable "aws_instance_type" {}


resource "tls_private_key" "activeeon_private_key" {
  algorithm = "RSA"
  rsa_bits  = 4096
}

resource "aws_key_pair" "activeeon_keypair" {
  key_name   = var.aws_keypair_name
  public_key = tls_private_key.activeeon_private_key.public_key_openssh
}

resource "aws_instance" "activeeon_aws_ec2_instances" {
  count         = var.aws_instances_count
  ami           = var.aws_ami
  instance_type = var.aws_instance_type
  key_name      = aws_key_pair.activeeon_keypair.key_name
}

resource "local_file" "private_key" {
  filename        = "${path.module}/artefacts/${var.aws_private_key}"
  content         = tls_private_key.activeeon_private_key.private_key_pem
  file_permission = "0777"
}

resource "local_file" "activeeon_aws_ec2_instance_dns" {
  count           = var.aws_instances_count
  filename        = "${path.module}/artefacts/aws_instance_dns_${count.index}"
  file_permission = "0777"
  content         = <<EOF
${aws_instance.activeeon_aws_ec2_instances[count.index].public_dns}
  EOF
}


]]>
          </code>
        </script>
      </pre>
      <scriptExecutable>
        <script>
          <code language="bash">
            <![CDATA[
workDir="/tmp/terraform-aws/$variables_PA_JOB_ID"
mkdir -p $workDir
cp terraform_aws_ec2_instances.tf $workDir
cd  $workDir

terraformBaseCommand="terraform"
docker version
if [ $? -eq 0 ] 
then
 echo "The Docker container for Terraform will be used" 
 terraformBaseCommand="docker run --rm -i -v `pwd`:/workdir hashicorp/terraform:latest -chdir=/workdir"
else 
 terraform -version
 if [ $? -ne 0 ] 
 then
   echo "Error: Docker and Terraform are not installed."
   exit 1
 fi
fi

echo "aws_access_key_id     = \"$variables_AWS_ACCESS_KEY\"" > $workDir/terraform.tfvars
echo "aws_secret_access_key = \"$variables_AWS_ACCESS_SECRET\"" >> $workDir/terraform.tfvars
echo "aws_private_key  = \"activeeon_tf_aws_private_key_$variables_PA_JOB_ID\"" >> $workDir/terraform.tfvars
echo "aws_keypair_name = \"activeeon_tf_aws_keypair_$variables_PA_JOB_ID\"" >> $workDir/terraform.tfvars
echo "aws_instances_count = \"$variables_AWS_INSTANCES_NUMBER\"" >> $workDir/terraform.tfvars
echo "aws_ami = \"$variables_AWS_AMI\"" >> $workDir/terraform.tfvars
echo "aws_instance_type = \"$variables_AWS_INSTANCE_TYPE\"" >> $workDir/terraform.tfvars

$terraformBaseCommand init
$terraformBaseCommand fmt
$terraformBaseCommand validate
$terraformBaseCommand plan -out "aws_tf_plan_$variables_PA_JOB_ID"
$terraformBaseCommand apply "aws_tf_plan_$variables_PA_JOB_ID"
]]>
          </code>
        </script>
      </scriptExecutable>
      <post>
        <script>
          <code language="groovy">
            <![CDATA[
import com.google.common.net.MediaType

def jobID=variables.get("PA_JOB_ID")
def token="activeeon_tf_aws_${jobID}"

rmapi.connect()
rmapi.addNodeToken(variables.get("PA_NODE_URL"),token)
variables.put("NODE_TOKEN",token)
]]>
          </code>
        </script>
      </post>
      <metadata>
        <positionTop>
            310.328125
        </positionTop>
        <positionLeft>
            569
        </positionLeft>
      </metadata>
    </task>
    <task name="undeploy_ec2_instances" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A bash task that executes Terraform commands to remove the deployed AWS EC2 instances. ]]>
      </description>
      <genericInformation>
        <info name="NODE_ACCESS_TOKEN" value="${NODE_TOKEN}"/>
      </genericInformation>
      <depends>
        <task ref="wait_for_action"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="bash">
            <![CDATA[
workDir="/tmp/terraform-aws/$variables_PA_JOB_ID"
cd  $workDir

terraformBaseCommand="terraform"
docker version
if [ $? -eq 0 ] 
then
 echo "The Docker container for Terraform will be used" 
 terraformBaseCommand="docker run --rm -i -v `pwd`:/workdir hashicorp/terraform:latest -chdir=/workdir"
else 
 terraform -version
 if [ $? -ne 0 ] 
 then
   echo "Error: Docker and Terraform are not installed."
   exit 1
 fi
fi

$terraformBaseCommand destroy --auto-approve

rm -rf $workDir/*
]]>
          </code>
        </script>
      </scriptExecutable>
      <post>
        <script>
          <code language="groovy">
            <![CDATA[
//Remove the token added to ProActive node
rmapi.connect()
rmapi.removeNodeToken(variables.get("PA_NODE_URL"), variables.get("NODE_TOKEN"))

//Remove External Endpoint Url
schedulerapi.connect()
schedulerapi.removeExternalEndpointUrl(variables.get("PA_JOB_ID"), "AWS EC2")



]]>
          </code>
        </script>
      </post>
      <metadata>
        <positionTop>
            695.328125
        </positionTop>
        <positionLeft>
            570
        </positionLeft>
      </metadata>
    </task>
    <task name="wait_for_action" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A groovy task that waits for a user action to trigger the removal of the deployed AWS EC2 instances ]]>
      </description>
      <depends>
        <task ref="download_private_key"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
signal = "Undeploy_EC2_Instances"
signalapi.readyForSignal(signal)
println("Waiting for signal reception ... ")
receivedSignal = signalapi.waitFor(signal)
]]>
          </code>
        </script>
      </scriptExecutable>
      <metadata>
        <positionTop>
            568.328125
        </positionTop>
        <positionLeft>
            569
        </positionLeft>
      </metadata>
    </task>
    <task name="download_private_key" 
    
    
    
    preciousResult="true" 
    fork="true">
      <description>
        <![CDATA[ A groovy task that: (i) displays the public DNS of each of the deployed AWS EC2 instances, and (ii) allows to download the SSH private key needed for accessing these instances ]]>
      </description>
      <genericInformation>
        <info name="NODE_ACCESS_TOKEN" value="${NODE_TOKEN}"/>
      </genericInformation>
      <depends>
        <task ref="deploy-ec2-instances"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
import groovy.io.FileType

def jobID=variables.get("PA_JOB_ID")
def workDir="/tmp/terraform-aws/${jobID}"

schedulerapi.connect()
schedulerapi.addExternalEndpointUrl(jobID, "AWS EC2", "https://aws.amazon.com/ec2/?nc2=h_ql_prod_cp_ec2" , "/automation-dashboard/styles/patterns/img/wf-icons/amazon.png")

fileName="activeeon_tf_aws_private_key_${jobID}"
file = new File("${workDir}/artefacts/${fileName}")
result = file.getBytes()
resultMetadata.put("file.name", fileName.toString())

numberOfInstances=variables.get("AWS_INSTANCES_NUMBER")
def artefactsDir = new File(workDir+"/artefacts")
artefactsDir.eachFileRecurse (FileType.FILES) { file ->
  println(file.name)
    if (file.name.startsWith("aws_instance_dns_")){
        println(file.name +" - "+ file.getText())
        resultMap.put(file.name,file.getText())
    }
}
]]>
          </code>
        </script>
      </scriptExecutable>
      <metadata>
        <positionTop>
            440.328125
        </positionTop>
        <positionLeft>
            569
        </positionLeft>
      </metadata>
    </task>
    <task name="read_aws_access_credentials" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A groovy task that reads the AWS access credentials from the ProActive buit-in vault (called 3rd Party Credentials) ]]>
      </description>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
variables.put("AWS_ACCESS_SECRET",credentials.get(variables.get("AWS_ACCESS_KEY")))
]]>
          </code>
        </script>
      </scriptExecutable>
      <metadata>
        <positionTop>
            185.328125
        </positionTop>
        <positionLeft>
            569
        </positionLeft>
      </metadata>
    </task>
  </taskFlow>
  <metadata>
    <visualization>
      <![CDATA[ <html>
    <head>
    <link rel="stylesheet" href="/studio/styles/studio-standalone.css">
        <style>
        #workflow-designer {
            left:0 !important;
            top:0 !important;
            width:2736px;
            height:3260px;
            }
        </style>
    </head>
    <body>
    <div id="workflow-visualization-view"><div id="workflow-visualization" style="position:relative;top:-180.328125px;left:-564px"><div class="task ui-draggable _jsPlumb_endpoint_anchor_ active-task" id="jsPlumb_1_73" style="top: 310.344px; left: 569px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A bash task that prepares Terraform setup and files for the deployment of AWS EC2 instances, then executes Terraform commands to perform the deployment."><img src="/studio/images/LinuxBash.png" width="20px">&nbsp;<span class="name">deploy-ec2-instances</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i id="called-icon"></i></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_76" style="top: 695.328px; left: 570px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A bash task that executes Terraform commands to remove the deployed AWS EC2 instances."><img src="/studio/images/LinuxBash.png" width="20px">&nbsp;<span class="name">undeploy_ec2_instances</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i id="called-icon"></i></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_79" style="top: 568.344px; left: 569px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A groovy task that waits for a user action to trigger the removal of the deployed AWS EC2 instances"><img src="/studio/images/Groovy.png" width="20px">&nbsp;<span class="name">wait_for_action</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i id="called-icon"></i></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_82" style="top: 440.344px; left: 569px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A groovy task that: (i) displays the public DNS of each of the deployed AWS EC2 instances, and (ii) allows to download the SSH private key needed for accessing these instances"><img src="/studio/images/Groovy.png" width="20px">&nbsp;<span class="name">download_private_key</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i id="called-icon"></i></a></div><div class="task _jsPlumb_endpoint_anchor_ ui-draggable" id="jsPlumb_1_85" style="top: 185.344px; left: 569px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A groovy task that reads the AWS access credentials from the ProActive buit-in vault (called 3rd Party Credentials)"><img src="/studio/images/Groovy.png" width="20px">&nbsp;<span class="name">read_aws_access_credentials</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i id="called-icon"></i></a></div><svg style="position:absolute;left:626px;top:224.5px" width="40.5" height="86" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 85 C -10 35 29.5 50 19.5 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-1.232765625000001,64.02515625000001 L11.10699569861097,46.799295154649364 L2.702643691852356,50.58966022235623 L-2.3285003290328072,42.86388583779701 L-1.232765625000001,64.02515625000001" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-1.232765625000001,64.02515625000001 L11.10699569861097,46.799295154649364 L2.702643691852356,50.58966022235623 L-2.3285003290328072,42.86388583779701 L-1.232765625000001,64.02515625000001" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:612.5px;top:607.5px" width="43" height="88.328125" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 22 87.328125 C 32 37.328125 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M22.952128,65.6888265 L23.444295038594134,44.50492290302049 L18.635389065261393,52.37095260927286 L10.126421147866987,48.8216618377591 L22.952128,65.6888265" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M22.952128,65.6888265 L23.444295038594134,44.50492290302049 L18.635389065261393,52.37095260927286 L10.126421147866987,48.8216618377591 L22.952128,65.6888265" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:612.5px;top:479.5px" width="37" height="89" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 88 C -10 38 26 50 16 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-1.4653440000000006,66.303232 L10.047269700939381,48.51391706735172 L1.8312684117227083,52.69689720304326 L-3.559065096017358,45.217304655629015 L-1.4653440000000006,66.303232" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-1.4653440000000006,66.303232 L10.047269700939381,48.51391706735172 L1.8312684117227083,52.69689720304326 L-3.559065096017358,45.217304655629015 L-1.4653440000000006,66.303232" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:626px;top:349.5px" width="23.5" height="91" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 2.5 90 C 12.5 40 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M5.12008,68.13216 L10.850253078902849,47.7320345963213 L4.240873257310212,54.159794577366334 L-3.122112343730814,48.61124133901109 L5.12008,68.13216" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M5.12008,68.13216 L10.850253078902849,47.7320345963213 L4.240873257310212,54.159794577366334 L-3.122112343730814,48.61124133901109 L5.12008,68.13216" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 626.5px; top: 340px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 626.5px; top: 300px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable" style="position: absolute; height: 20px; width: 20px; left: 635px; top: 725.328px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 635px; top: 685.328px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 613px; top: 598px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 613px; top: 558px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 629px; top: 470px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 629px; top: 430px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 646px; top: 215px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div></div></div>
    </body>
</html>
 ]]>
    </visualization>
  </metadata>
</job>