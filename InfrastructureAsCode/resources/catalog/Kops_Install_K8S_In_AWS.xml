<?xml version="1.0" encoding="UTF-8"?>
<job
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="urn:proactive:jobdescriptor:3.14" xsi:schemaLocation="urn:proactive:jobdescriptor:3.14 http://www.activeeon.com/public_content/schemas/proactive/jobdescriptor/3.14/schedulerjob.xsd"  name="Kops_Install_K8S_In_AWS" projectName="Kubernetes workflows" tags="Kops,K8S,SSH,Enterprise-grade,AWS,Kubernetes" priority="normal" onTaskError="suspendTask"  maxNumberOfExecution="1"  >
  <variables>
    <variable name="AWS_ACCESS_KEY" value="kops_aws_access_key" model="PA:NOT_EMPTY_STRING" description="AWS access key used by Kops to create AWS resources." group="AWS Subscription" advanced="false" hidden="false"/>
    <variable name="AWS_SECRET_KEY" value="$AWS_ACCESS_KEY" model="PA:CREDENTIAL" description="AWS secret key used by Kops to create AWS resources. Must be added to the third-party credentials vault." group="AWS Subscription" advanced="false" hidden="false"/>
    <variable name="AWS_REGION" value="eu-west-3" model="PA:NOT_EMPTY_STRING" description="AWS region where the cluster deployment will take place" group="AWS Subscription" advanced="true" hidden="false"/>
    <variable name="K8S_DOMAIN" value="activeeon-k8s.net" model="PA:NOT_EMPTY_STRING" description="An AWS Route53 domain, used as the main domain of the Kubernetes cluster." group="Kubernetes Parameters" advanced="false" hidden="false"/>
    <variable name="K8S_CLUSTER_NAME" value="kubernetes-${PA_JOB_ID}" model="PA:NOT_EMPTY_STRING" description="Name of the Kubernetes cluster, to be used as the sub-domain of the Kubernetes cluster." group="Kubernetes Parameters" advanced="false" hidden="false"/>
    <variable name="K8S_NODE_COUNT" value="2" model="PA:INTEGER" description="Number of the worker nodes in the Kubernetes cluster." group="Kubernetes Parameters" advanced="false" hidden="false"/>
    <variable name="K8S_NODE_SIZE" value="t3.large" model="PA:NOT_EMPTY_STRING" description="Size of the worker nodes (i.e., EC2 instances) in the Kubernetes cluster." group="Kubernetes Parameters" advanced="true" hidden="false"/>
    <variable name="K8S_STATE_STORE" value="activeeon-k8s-state-store" model="PA:NOT_EMPTY_STRING" description="Name of the AWS S3 bucket to be used for storing the state information of the Kubernetes cluster. If the bucket does not exist, it will be created and configured by the workflows." group="Kubernetes Parameters" advanced="true" hidden="false"/>
    <variable name="K8S_OIDC_STORE" value="activeeon-k8s-oidc-store" model="PA:NOT_EMPTY_STRING" description="Name of the AWS S3 bucket to be used for storing the OIDC access information of the Kubernetes cluster. If the bucket does not exist, it will be created and configured by the workflows." group="Kubernetes Parameters" advanced="true" hidden="false"/>
    <variable name="USER_OF_AWS_AMI" value="ubuntu" model="PA:NOT_EMPTY_STRING" description="Standard user of the AWS AMI used for the nodes of the kubernetes cluster." group="Kubernetes Parameters" advanced="true" hidden="true"/>
    <variable name="DELETE_AWS_BUCKETS" value="false" model="PA:BOOLEAN" description="Indicate whether to remove the S3 buckets (i.e., the state and OIDC stores) when deleting the Kubernetes cluster. By default, this variable is set to false as the same buckets can be used by multiple Kubernetes clusters." group="Kubernetes Parameters"  hidden="false"/>
    <variable name="DASHBOARD_TOKEN_DURATION" value="2h" model="PA:NOT_EMPTY_STRING" description="Validity duration of the token needed to access the Kubernetes Dashboard. It can be in seconds, minutes or hours (e.g., 360s, 60m, 24h)" group="Kubernetes Parameters" advanced="true" hidden="false"/>
  </variables>
  <description>
    <![CDATA[ A workflow that uses the Kops tool to install an enterprise-grade Kubernetes cluster in AWS. Once the installation is done, the workflow enables an SSH access to  the master node of the Kubernetes cluster. The workflow requires Docker to be installed in the underlying hosts where it will be executed, since the tools it uses (Kops, Kubectl and AWS CLI) are executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools). ]]>
  </description>
  <genericInformation>
    <info name="bucketName" value="it-infrastructure-as-code"/>
    <info name="workflow.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/kops.svg"/>
    <info name="Documentation" value="https://kops.sigs.k8s.io/getting_started/aws/"/>
    <info name="group" value="public-objects"/>
  </genericInformation>
  <taskFlow>
    <task name="Create_AWS_Buckets" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A bash task that uses AWS CLI to create S3 buckets for the Kubernetes cluster (i.e., the state and OIDC stores), if they do not exist. AWS CLI is executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools). This task requires then Docker to be installed in its underlying host. ]]>
      </description>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/amazon.png"/>
        <info name="PRE_SCRIPT_AS_FILE" value="Create-Kops-Buckets-In-AWS.sh"/>
      </genericInformation>
      <depends>
        <task ref="Read_AWS_Credentials"/>
      </depends>
      <pre>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/it-infrastructure-as-code/resources/Create-Kops-Buckets-In-AWS/raw" language="shell"></file>
        </script>
      </pre>
      <scriptExecutable>
        <script>
          <code language="bash">
            <![CDATA[
if [ ! -f "Create-Kops-Buckets-In-AWS.sh" ]; then
    echo "Bucket creation script not found !!" && exit 1
fi
chmod +x Create-Kops-Buckets-In-AWS.sh

mkdir -p .aws
mkdir -p /tmp/kops/$variables_K8S_CLUSTER_NAME/.kube

AWS_DIR=$(pwd)/.aws
KUBE_DIR=/tmp/kops/$variables_K8S_CLUSTER_NAME/.kube

echo "[default]" > $AWS_DIR/config
echo "region=$variables_AWS_REGION" >> $AWS_DIR/config
echo "output=json" >> $AWS_DIR/config

echo "[default]" > $AWS_DIR/credentials
echo "aws_access_key_id=$variables_AWS_ACCESS_KEY" >> $AWS_DIR/credentials
echo "aws_secret_access_key=$variables_AWS_ACCESS_SECRET" >> $AWS_DIR/credentials

# Alias for executing Kops, Kubectl and aws commands
K8S_TOOLS="docker run --rm -i -v $AWS_DIR:/root/.aws -v $KUBE_DIR:/root/.kube -v $(pwd):/scripts activeeon/k8s-tools"

# Create KOPS user in AWS
$K8S_TOOLS /scripts/Create-Kops-Buckets-In-AWS.sh $variables_K8S_STATE_STORE $variables_K8S_OIDC_STORE
]]>
          </code>
        </script>
      </scriptExecutable>
      <metadata>
        <positionTop>
            339
        </positionTop>
        <positionLeft>
            687
        </positionLeft>
      </metadata>
    </task>
    <task name="Read_AWS_Credentials" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A groovy task that reads the AWS access credentials from the ProActive buit-in vault (called 3rd Party Credentials vault) ]]>
      </description>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
variables.put("AWS_ACCESS_SECRET",credentials.get(variables.get("AWS_ACCESS_KEY")))

//variables.put("CLUSTER_ID",new Random().nextInt(10 ** 4))
]]>
          </code>
        </script>
      </scriptExecutable>
      <metadata>
        <positionTop>
            220
        </positionTop>
        <positionLeft>
            678
        </positionLeft>
      </metadata>
    </task>
    <task name="Delete_Kubernetes_Cluster" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A bash task that deletes a Kubernetes cluster using Kops. This task requires Docker to be installed in its underlying host, since the tools it uses (Kops, Kubectl and AWS CLI) are executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools). ]]>
      </description>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/Kube.png"/>
      </genericInformation>
      <depends>
        <task ref="Stop_SSH_Connection"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="bash">
            <![CDATA[
if [ "$variables_SIGNAL_ACTION" = "Delete_Kubernetes_Cluster" ]; then
    mkdir -p .aws
    mkdir -p /tmp/kops/$variables_K8S_CLUSTER_NAME/.kube

    AWS_DIR=$(pwd)/.aws
    KUBE_DIR=/tmp/kops/$variables_K8S_CLUSTER_NAME/.kube

    echo "[default]" > $AWS_DIR/config
    echo "region=$variables_AWS_REGION" >> $AWS_DIR/config
    echo "output=json" >> $AWS_DIR/config

    echo "[default]" > $AWS_DIR/credentials
    echo "aws_access_key_id=$variables_AWS_ACCESS_KEY" >> $AWS_DIR/credentials
    echo "aws_secret_access_key=$variables_AWS_ACCESS_SECRET" >> $AWS_DIR/credentials

    STATE_BUCKET=$variables_K8S_STATE_STORE
    OIDC_BUCKET=$variables_K8S_OIDC_STORE

    export NAME="$variables_K8S_CLUSTER_NAME.$variables_K8S_DOMAIN"
    export KOPS_STATE_STORE=s3://$STATE_BUCKET
    export AWS_ACCESS_KEY_ID=$variables_AWS_ACCESS_KEY
    export AWS_SECRET_ACCESS_KEY=$variables_AWS_ACCESS_SECRET

    ENVIRONMENT_OPTIONS="-e NAME -e KOPS_STATE_STORE -e AWS_ACCESS_KEY_ID -e AWS_SECRET_ACCESS_KEY"

    # Alias for executing Kops, Kubectl and aws commands
    K8S_TOOLS="docker run --rm -i -v $AWS_DIR:/root/.aws -v $KUBE_DIR:/root/.kube $ENVIRONMENT_OPTIONS activeeon/k8s-tools"

    # Delete Kubernetes cluster
    $K8S_TOOLS kops delete cluster --name ${NAME} --yes

    # Remove the temporary folder used by Kubernetes cluster
    sudo rm -rf /tmp/kops/$variables_K8S_CLUSTER_NAME
fi
]]>
          </code>
        </script>
      </scriptExecutable>
      <controlFlow block="none"></controlFlow>
      <metadata>
        <positionTop>
            1184
        </positionTop>
        <positionLeft>
            679
        </positionLeft>
      </metadata>
    </task>
    <task name="Create_Kubernetes_Cluster" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A bash task that create a Kubernetes cluster using Kops. This task requires Docker to be installed in its underlying host, since the tools it uses (Kops, Kubectl and AWS CLI) are executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools). ]]>
      </description>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/Kube.png"/>
        <info name="PRE_SCRIPT_AS_FILE" value="Create-Kubernetes-Cluster-With-Kops.sh"/>
      </genericInformation>
      <depends>
        <task ref="Create_AWS_Buckets"/>
      </depends>
      <pre>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/it-infrastructure-as-code/resources/Create-Kubernetes-Cluster-With-Kops/raw" language="shell"></file>
        </script>
      </pre>
      <scriptExecutable>
        <script>
          <code language="bash">
            <![CDATA[
if [ ! -f "Create-Kubernetes-Cluster-With-Kops.sh" ]; then
    echo "Cluster creation script not found !!" && exit 1
fi
chmod +x Create-Kubernetes-Cluster-With-Kops.sh

AWS_DIR=$(pwd)/.aws
KUBE_DIR=/tmp/kops/$variables_K8S_CLUSTER_NAME/.kube
SSH_DIR=/tmp/kops/$variables_K8S_CLUSTER_NAME/.ssh

mkdir -p $AWS_DIR
mkdir -p $KUBE_DIR
mkdir -p $SSH_DIR

# Configure AWS credentials
echo "[default]" > $AWS_DIR/config
echo "region=$variables_AWS_REGION" >> $AWS_DIR/config
echo "output=json" >> $AWS_DIR/config

echo "[default]" > $AWS_DIR/credentials
echo "aws_access_key_id=$variables_AWS_ACCESS_KEY" >> $AWS_DIR/credentials
echo "aws_secret_access_key=$variables_AWS_ACCESS_SECRET" >> $AWS_DIR/credentials

# Create SSH keypair to be used to connect to Kubernetes cluster
ssh-keygen -t rsa -b 4096 -N '' -f $SSH_DIR/id_rsa

if [ ! -f "$SSH_DIR/id_rsa.pub" ]; then
    echo "The SSH keypair is not generated properly" && exit 1
fi

STATE_BUCKET=$variables_K8S_STATE_STORE
OIDC_BUCKET=$variables_K8S_OIDC_STORE

export SHORT_NAME="$variables_K8S_CLUSTER_NAME"
export NAME="$variables_K8S_CLUSTER_NAME.$variables_K8S_DOMAIN"
export KOPS_STATE_STORE=s3://$STATE_BUCKET

export AWS_ACCESS_KEY_ID=$variables_AWS_ACCESS_KEY
export AWS_SECRET_ACCESS_KEY=$variables_AWS_ACCESS_SECRET

export OIDC_BUCKET=$OIDC_BUCKET
export ZONES=$variables_AWS_REGION"a"
export NODE_COUNT=$variables_K8S_NODE_COUNT
export NODE_SIZE=$variables_K8S_NODE_SIZE

ENVIRONMENT_OPTIONS="-e NAME -e SHORT_NAME -e KOPS_STATE_STORE -e AWS_ACCESS_KEY_ID -e AWS_SECRET_ACCESS_KEY -e OIDC_BUCKET -e ZONES -e NODE_COUNT -e NODE_SIZE"

# Alias for executing Kops, Kubectl and aws commands
K8S_TOOLS="docker run --rm -i -v $AWS_DIR:/root/.aws -v $SSH_DIR:/root/.ssh -v $KUBE_DIR:/root/.kube -v $(pwd):/scripts $ENVIRONMENT_OPTIONS activeeon/k8s-tools"

# Create Kubernetes cluster using KOPS
$K8S_TOOLS /scripts/Create-Kubernetes-Cluster-With-Kops.sh
]]>
          </code>
        </script>
      </scriptExecutable>
      <post>
        <script>
          <code language="groovy">
            <![CDATA[

]]>
          </code>
        </script>
      </post>
      <metadata>
        <positionTop>
            455
        </positionTop>
        <positionLeft>
            686
        </positionLeft>
      </metadata>
    </task>
    <task name="Delete_AWS_Buckets" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A bash task that uses AWS CLI to delete S3 buckets used by the Kubernetes cluster (i.e., the state and OIDC stores), if the variable 'DELETE_AWS_BUCKETS' is set to TRUE. AWS CLI is executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools). This task requires then Docker to be installed in its underlying host. ]]>
      </description>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/amazon.png"/>
      </genericInformation>
      <depends>
        <task ref="Delete_Kubernetes_Cluster"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="bash">
            <![CDATA[
if $variables_DELETE_AWS_BUCKETS; then
    mkdir -p .aws
    mkdir -p /tmp/kops/$variables_K8S_CLUSTER_NAME/.kube

    AWS_DIR=$(pwd)/.aws
    KUBE_DIR=/tmp/kops/$variables_K8S_CLUSTER_NAME/.kube

    echo "[default]" > $AWS_DIR/config
    echo "region=$variables_AWS_REGION" >> $AWS_DIR/config
    echo "output=json" >> $AWS_DIR/config

    echo "[default]" > $AWS_DIR/credentials
    echo "aws_access_key_id=$variables_AWS_ACCESS_KEY" >> $AWS_DIR/credentials
    echo "aws_secret_access_key=$variables_AWS_ACCESS_SECRET" >> $AWS_DIR/credentials

    # Alias for executing Kops, Kubectl and aws commands
    K8S_TOOLS="docker run --rm -i -v $AWS_DIR:/root/.aws -v $KUBE_DIR:/root/.kube activeeon/k8s-tools"

    # Delete KOPS and OIDC buckets in AWS S3 
    STATE_BUCKET=$variables_K8S_STATE_STORE
    OIDC_BUCKET=$variables_K8S_OIDC_STORE
    
    $K8S_TOOLS aws s3api delete-bucket --bucket $STATE_BUCKET && aws s3api delete-bucket --bucket $OIDC_BUCKET
fi
]]>
          </code>
        </script>
      </scriptExecutable>
      <controlFlow block="end"></controlFlow>
      <metadata>
        <positionTop>
            1324
        </positionTop>
        <positionLeft>
            699.5
        </positionLeft>
      </metadata>
    </task>
    <task name="Wait_for_User_Action" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A groovy task that waits for a user action to: (i) perform a SSH connection to the Kubernetes master node, or (ii) finish the SSH connection, terminate the deployed Kubernetes cluster and eventually delete S3 buckets used by the cluster. ]]>
      </description>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/signal-wait.png"/>
        <info name="task.documentation" value="user/ProActiveUserGuide.html#_branch"/>
      </genericInformation>
      <depends>
        <task ref="Kubernetes_Dashboard"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
import org.ow2.proactive.scheduler.common.job.JobVariable

def signals = ['Delete_Kubernetes_Cluster']

if (variables.get("SSH_ENABLED")!="TRUE"){
    signals.add("Connect_To_K8S_Master")
}
    
signals.each {  signalapi.readyForSignal(it) }

println("Waiting for user action ... ")
receivedSignal = signalapi.waitForAny(signals.toSet())
println(receivedSignal)
signals.each {  signalapi.removeSignal("ready_"+it) }

if (receivedSignal.getName() == "Delete_Kubernetes_Cluster"){
    variables.put("SIGNAL_ACTION","Delete_Kubernetes_Cluster")
    println("Deleting Kubernetes Cluster ...")
} else if (receivedSignal.getName() == "Connect_To_K8S_Master"){
    variables.put("SIGNAL_ACTION","Connect_To_K8S_Master")
    variables.put("SSH_ENABLED","TRUE")
    println("Connectiong to Kubernetes master node via SSH ...")
}
]]>
          </code>
        </script>
      </scriptExecutable>
      <controlFlow  block="start">
        <if target="Start_SSH_Connection"
        else="Stop_SSH_Connection"
        continuation="Loop">
          <script>
            <code language="groovy">
              <![CDATA[
action = variables.get("SIGNAL_ACTION")

if ( action == "Connect_To_K8S_Master" ) {
    branch = "if"
} else  if ( action == "Delete_Kubernetes_Cluster" ) {
    branch = "else"
}
]]>
            </code>
          </script>
        </if>
      </controlFlow>
      <post>
        <script>
          <code language="groovy">
            <![CDATA[
action = variables.get("SIGNAL_ACTION")

if ( action == "Connect_To_K8S_Master" ) {
    jobID = variables.get("PA_JOB_ID")
    host = variables.get("K8S_MASTER_HOST")
    user = variables.get("USER_OF_AWS_AMI")
 
    variables.put("INSTANCE_NAME", "shell-terminal-${jobID}")
    variables.put("PROXYFIED", "True")
    variables.put("ENDPOINT_ID", host)
    
    variables.put("USE_MANAGED_HOST_LIST", "False")
    variables.put("SSH_TARGET_HOST", host)
    variables.put("SSH_USER", user)
    variables.put("SSH_PORT", "22")
	
    variables.put("AUTHENTICATION_METHOD", "SSH_PRIVATE_KEY")

    schedulerapi.connect() 
	schedulerapi.putThirdPartyCredential("${user}@${host}",variables.get("PRIVATE_KEY")) 
}
]]>
          </code>
        </script>
      </post>
      <metadata>
        <positionTop>
            862.5
        </positionTop>
        <positionLeft>
            696
        </positionLeft>
      </metadata>
    </task>
    <task name="Download_Kubernetes_Config" 
    
    
    
    preciousResult="true" 
    fork="true">
      <description>
        <![CDATA[ A groovy task that allows to download the configuration file of the deployed Kubernetes cluster. The configuration file can be used by any Kubectl client to control the cluster. ]]>
      </description>
      <depends>
        <task ref="Create_Kubernetes_Cluster"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
def clusterName = variables.get("K8S_CLUSTER_NAME")

def kubeConfig=new File("/tmp/kops/${clusterName}/.kube/${clusterName}-config")
if (kubeConfig.exists()){
    result = kubeConfig.getBytes()
    resultMetadata.put("file.name", clusterName+"-config")
}
]]>
          </code>
        </script>
      </scriptExecutable>
      <metadata>
        <positionTop>
            578.984375
        </positionTop>
        <positionLeft>
            560
        </positionLeft>
      </metadata>
    </task>
    <task name="Download_Private_Key" 
    
    
    
    preciousResult="true" 
    fork="true">
      <description>
        <![CDATA[ A groovy task that: (i) displays information about the deployed Kubernetes cluster, and (ii) allows to download the SSH private key needed for accessing the nodes of the cluster. ]]>
      </description>
      <depends>
        <task ref="Create_Kubernetes_Cluster"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
def domain = variables.get("K8S_DOMAIN")
def clusterName = variables.get("K8S_CLUSTER_NAME")
def user = variables.get("USER_OF_AWS_AMI")
def kubernetesMasterHost = "api."+clusterName+"."+domain

def privateKey=new File("/tmp/kops/${clusterName}/.ssh/${clusterName}-ssh-private-key")
if (privateKey.exists()){
    result = privateKey.getBytes()
    resultMetadata.put("file.name", clusterName+"-ssh-private-key")
    
    variables.put("PRIVATE_KEY",privateKey.getText())
	println(variables.get("PRIVATE_KEY"))
}

resultMap.put("K8S cluster name",clusterName+"."+domain)
resultMap.put("K8S control plane DNS",kubernetesMasterHost)
resultMap.put("SSH to control plane","ssh -i path-to-private-key "+ user +"@"+kubernetesMasterHost)

variables.put("K8S_MASTER_HOST",kubernetesMasterHost)
]]>
          </code>
        </script>
      </scriptExecutable>
      <metadata>
        <positionTop>
            583
        </positionTop>
        <positionLeft>
            796
        </positionLeft>
      </metadata>
    </task>
    <task name="Start_SSH_Connection" 
    
    
    
    
    fork="false">
      <description>
        <![CDATA[ Start a SSH connection in the browser to the kubernetes master node. ]]>
      </description>
      <variables>
        <variable name="SSH_INSTANCE_NAME" value="ssh-via-browser-${PA_JOB_ID}" inherited="false" model="PA:NOT_EMPTY_STRING" description="Name of the SSH service instance."  advanced="false" hidden="false"/>
        <variable name="SERVICE_ACTIVATION_WORKFLOW" value="service-automation/SSH_Terminal_Via_Browser" inherited="false" model="PA:CATALOG_OBJECT(Workflow/psa,,,SSH_Terminal_Via_Browser%)" description="The SSH service activation workflow."  advanced="false" hidden="false"/>
        <variable name="INSTANCE_NAME" value="" inherited="true"  description="Instance name of RabbitMQ"  advanced="false" hidden="false"/>
        <variable name="PROXYFIED" value="" inherited="true"  description="If True, requests to RabbitMQ are sent via a proxy server."  advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/ssh.png"/>
        <info name="task.documentation" value="PSA/PSAUserGuide.html"/>
      </genericInformation>
      <scriptExecutable>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/service-automation/resources/Service_Start/raw" language="groovy">
            <arguments>
              <argument value="true"/>
              <argument value="false"/>
              <argument value="INSTANCE_NAME"/>
              <argument value="PROXYFIED"/>
              <argument value="USE_MANAGED_HOST_LIST"/>
              <argument value="SSH_TARGET_HOST"/>
              <argument value="SSH_USER"/>
              <argument value="SSH_PORT"/>
              <argument value="AUTHENTICATION_METHOD"/>
              <argument value="SSH_PRIVATE_KEY"/>
              <argument value="ENDPOINT_ID"/>
            </arguments>
          </file>
        </script>
      </scriptExecutable>
      <post>
        <script>
          <code language="groovy">
            <![CDATA[

]]>
          </code>
        </script>
      </post>
      <metadata>
        <positionTop>
            1051
        </positionTop>
        <positionLeft>
            433.5
        </positionLeft>
      </metadata>
    </task>
    <task name="Stop_SSH_Connection" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A task that finishes the SSH connection to the kubernetes master node. ]]>
      </description>
      <variables>
        <variable name="INSTANCE_ID" value="" inherited="false"  description="ID of the SSH service instance to stop."  advanced="false" hidden="false"/>
        <variable name="SERVICE_ACTION_WORKFLOW" value="service-automation/Finish_SSH_Terminal_Via_Browser" inherited="false" model="PA:CATALOG_OBJECT(Workflow/psa,,,%Finish_SSH_Terminal_Via_Browser)" description="The SSH service activation workflow."  advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/ssh.png"/>
      </genericInformation>
      <pre>
        <script>
          <code language="groovy">
            <![CDATA[

]]>
          </code>
        </script>
      </pre>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
import org.ow2.proactive.pca.service.client.ApiClient
import org.ow2.proactive.pca.service.client.api.CatalogRestApi
import org.ow2.proactive.pca.service.client.api.ServiceInstanceRestApi
import org.ow2.proactive.pca.service.client.model.CloudAutomationWorkflow
import org.ow2.proactive.pca.service.client.model.ServiceDescription
import java.util.concurrent.TimeoutException
import com.google.common.base.Strings

if (variables.get("SSH_ENABLED")=="TRUE"){

	println("BEGIN " + variables.get("PA_TASK_NAME"))

    try {
    // Get schedulerapi access
    schedulerapi.connect()

    // Acquire session id
    def sessionId = schedulerapi.getSession()

    // Define PCA URL
    def pcaUrl = variables.get('PA_CLOUD_AUTOMATION_REST_URL')

    // Connect to APIs
    def apiClient = new ApiClient()
    apiClient.setBasePath(pcaUrl)
    //apiClient.setDebugging(true)
    def serviceInstanceRestApi = new ServiceInstanceRestApi(apiClient)
    def instanceName = variables.get("INSTANCE_NAME")
    def instanceId = (!variables.get("INSTANCE_ID") && instanceName)? variables.get("INSTANCE_ID_" + instanceName) : variables.get("INSTANCE_ID")
    if (!instanceId && !instanceName){
        throw new IllegalArgumentException("You have to specify an INSTANCE_NAME or an INSTANCE_ID. Empty value for both is not allowed.");
    }

    println("INSTANCE_ID: " + instanceId)
	println(instanceName)
    println(variables.get("INSTANCE_ID_" + instanceName))

    def bucketName
    def isActionExists = false
    def catalogRestApi = new CatalogRestApi(apiClient)
    def actionVariables = new HashMap()

    def action = variables.get("ACTION")
    def serviceActionWorkflow = variables.get("SERVICE_ACTION_WORKFLOW")

    if (Strings.isNullOrEmpty(action) && Strings.isNullOrEmpty(serviceActionWorkflow)) {
        throw new IllegalArgumentException("You have to provide an ACTION value or a SERVICE_ACTION_WORKFLOW. Empty value is not allowed.");
    }

    if (!Strings.isNullOrEmpty(action)) {
        List<CloudAutomationWorkflow> listExecutableActions = catalogRestApi.listExecutableActionsByInstanceIdUsingGET(sessionId, instanceId.toString()).get(instanceId.toString())
        for (CloudAutomationWorkflow actionIterator : listExecutableActions) {
            if (actionIterator.getName().equals(action)){
                bucketName = actionIterator.getBucket()
                //retrieve default action variables
                actionVariables = actionIterator.getVariables().collectEntries {var -> [var.getName(), var.getValue()]}
                isActionExists = true
                break
            }
        }
    } else if (!Strings.isNullOrEmpty(serviceActionWorkflow)) {
        def serviceActionWorkflowSplits = serviceActionWorkflow.split('/')
        bucketName = serviceActionWorkflowSplits[0]
        action = serviceActionWorkflowSplits[1]
        CloudAutomationWorkflow executableAction = catalogRestApi.getExecutableActionByCatalogObjectUsingGET(sessionId, instanceId, bucketName, action)
        println("Action Bucket_name: " + bucketName + ", Action_workflow_name: " + action)
        if (executableAction != null) {
            actionVariables = executableAction.getVariables().collectEntries {var -> [var.getName(), var.getValue()]}
            isActionExists = true
        }
    }
    if(!isActionExists){
        throw new IllegalArgumentException("The provided ACTION: " + action + " does not belong to the existing possible actions that can be applied to the current state of the service. You have to specify a valid action.")
    }

    // Retrieve and update workflow variables
    if (binding.variables["args"]){
        for (String var: args){
            actionVariables.put(var, variables.get(var))
        }
    }

    // Execute action on service
    ServiceDescription service = new ServiceDescription()
    service.setBucketName(bucketName)
    service.setWorkflowName(action)
    if( !actionVariables.isEmpty() ){
        actionVariables.each{ k, v -> service.putVariablesItem("${k}", "${v}") }
    }
    def serviceInstanceData = serviceInstanceRestApi.launchServiceInstanceActionUsingPUT(sessionId, instanceId as int, service, variables.get("PA_JOB_ID"))

    if (action.toLowerCase().contains("finish")) {
        try {
            schedulerapi.waitForJob(serviceInstanceData.getJobSubmissions().get(0).getJobId().toString(), 180000)
        } catch (TimeoutException toe) {
            println("[warning] Timeout reached. Disable to wait until the PCA service " + instanceId + " finishes." )
        }
    }}
    catch (Exception ex) {
        println("[error] Unable to finalize the PCA service. It was already finished?" )
        ex.printStackTrace();
    }


	println("END " + variables.get("PA_TASK_NAME"))
}
]]>
          </code>
          <arguments>
            <argument value="INSTANCE_NAME"/>
          </arguments>
        </script>
      </scriptExecutable>
      <controlFlow block="start"></controlFlow>
      <metadata>
        <positionTop>
            1048
        </positionTop>
        <positionLeft>
            690.5
        </positionLeft>
      </metadata>
    </task>
    <task name="Loop" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A simple task to loop over user actions. ]]>
      </description>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[

]]>
          </code>
        </script>
      </scriptExecutable>
      <controlFlow  block="end">
        <loop target="Wait_for_User_Action">
          <script>
            <code language="groovy">
              <![CDATA[
signalAction=variables.get("SIGNAL_ACTION")

loop = signalAction=="Delete_Kubernetes_Cluster" ? false : true

variables.put("SIGNAL_ACTION","")
]]>
            </code>
          </script>
        </loop>
      </controlFlow>
      <metadata>
        <positionTop>
            1050.453125
        </positionTop>
        <positionLeft>
            958
        </positionLeft>
      </metadata>
    </task>
    <task name="Kubernetes_Dashboard" 
    
    
    
    preciousResult="true" 
    fork="true">
      <description>
        <![CDATA[ A bash task that deploys the Kubernetes dashboard using kubectl. This task requires Docker to be installed in its underlying host, since Kubectl is executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools). ]]>
      </description>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/Kube.png"/>
        <info name="PRE_SCRIPT_AS_FILE" value="kubernetes-dashboard.yaml"/>
      </genericInformation>
      <depends>
        <task ref="Download_Private_Key"/>
        <task ref="Download_Kubernetes_Config"/>
      </depends>
      <pre>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/it-infrastructure-as-code/resources/kubernetes-dashboard/raw" language="kubernetes"></file>
        </script>
      </pre>
      <scriptExecutable>
        <script>
          <code language="bash">
            <![CDATA[
if [ ! -f "kubernetes-dashboard.yaml" ]; then
    echo "kubernetes-dashboard.yaml script not found !!" && exit 1
fi

DASHBOARD_DIR=/tmp/kops/$variables_K8S_CLUSTER_NAME/dashboard
mkdir -p $DASHBOARD_DIR
cp kubernetes-dashboard.yaml $DASHBOARD_DIR

KUBE_DIR=/tmp/kops/$variables_K8S_CLUSTER_NAME/.kube

# Alias for executing Kops, Kubectl and aws commands
K8S_TOOLS="docker run --rm -i -v $KUBE_DIR:/root/.kube -v $DASHBOARD_DIR:/dashboard activeeon/k8s-tools"

# Create kubernetes dashboard
$K8S_TOOLS kubectl apply -f /dashboard/kubernetes-dashboard.yaml

# Wait for the dashboard deployment to finish
ATTEMPTS=0
LB_EXTERNAL_ADDRESS=""

until [ $ATTEMPTS -gt 36 ]
do
	LB_EXTERNAL_ADDRESS=$($K8S_TOOLS kubectl get svc -n kubernetes-dashboard kubernetes-dashboard -o=jsonpath='{.status.loadBalancer.ingress[0].hostname}')
    echo "Dashboard service load balancer address: $LB_EXTERNAL_ADDRESS" 
    
    if [ ! -z "$LB_EXTERNAL_ADDRESS" ] && [ "$LB_EXTERNAL_ADDRESS" != "none" ] && [ "$LB_EXTERNAL_ADDRESS" != "pending" ]; then
        break
    fi 

    sleep 10
    ((ATTEMPTS++))
done

CLUSTER_NAME="$variables_K8S_CLUSTER_NAME"

if [ ! -z "$LB_EXTERNAL_ADDRESS" ]; then
	echo "https://$LB_EXTERNAL_ADDRESS" > $DASHBOARD_DIR/$CLUSTER_NAME-dashboard-address
fi

TOKEN=$($K8S_TOOLS kubectl -n kubernetes-dashboard create token admin-user --duration=$variables_DASHBOARD_TOKEN_DURATION)
echo "$TOKEN" > $DASHBOARD_DIR/$CLUSTER_NAME-dashboard-token

$K8S_TOOLS chmod -R go+r /dashboard
]]>
          </code>
        </script>
      </scriptExecutable>
      <post>
        <script>
          <code language="groovy">
            <![CDATA[
def clusterName = variables.get("K8S_CLUSTER_NAME")

def tokenFile=new File("/tmp/kops/${clusterName}/dashboard/${clusterName}-dashboard-token")
def addressFile=new File("/tmp/kops/${clusterName}/dashboard/${clusterName}-dashboard-address")

if (tokenFile.exists() && addressFile.exists()){
    
    // Acquire and display the token to access kubernetes dashboard 
    result = tokenFile.getBytes()
    resultMetadata.put("file.name", clusterName+"-dashboard-token")
    
    // Display the AWS portal endpoint
    schedulerapi.connect()
    schedulerapi.addExternalEndpointUrl(variables.get("PA_JOB_ID"), "Kubernetes Dashboard", addressFile.getText(), "/automation-dashboard/styles/patterns/img/wf-icons/Kube.png")
    
} else {
    println "Kubernetes Dashboard is not deployed properly"
}
]]>
          </code>
        </script>
      </post>
      <metadata>
        <positionTop>
            728
        </positionTop>
        <positionLeft>
            676.5
        </positionLeft>
      </metadata>
    </task>
  </taskFlow>
  <metadata>
    <visualization>
      <![CDATA[ <html>
    <head>
    <link rel="stylesheet" href="/studio/styles/studio-standalone.css">
        <style>
        #workflow-designer {
            left:0 !important;
            top:0 !important;
            width:2725px;
            height:3120px;
            }
        </style>
    </head>
    <body>
    <div id="workflow-visualization-view"><div id="workflow-visualization" style="position:relative;top:-215px;left:-428.5px"><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_876" style="top: 339px; left: 687px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A bash task that uses AWS CLI to create S3 buckets for the Kubernetes cluster (i.e., the state and OIDC stores), if they do not exist. AWS CLI is executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools). This task requires then Docker to be installed in its underlying host."><img src="/automation-dashboard/styles/patterns/img/wf-icons/amazon.png" width="20px">&nbsp;<span class="name">Create_AWS_Buckets</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon" class="glyphicon glyphicon-list-alt"></i></a></div><div class="task _jsPlumb_endpoint_anchor_ ui-draggable" id="jsPlumb_1_879" style="top: 220px; left: 678px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A groovy task that reads the AWS access credentials from the ProActive buit-in vault (called 3rd Party Credentials vault)"><img src="/studio/images/Groovy.png" width="20px">&nbsp;<span class="name">Read_AWS_Credentials</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon"></i></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_882" style="top: 1184px; left: 679px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A bash task that deletes a Kubernetes cluster using Kops. This task requires Docker to be installed in its underlying host, since the tools it uses (Kops, Kubectl and AWS CLI) are executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools)."><img src="/automation-dashboard/styles/patterns/img/wf-icons/Kube.png" width="20px">&nbsp;<span class="name">Delete_Kubernetes_Cluster</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon"></i></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_885" style="top: 455px; left: 686px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A bash task that create a Kubernetes cluster using Kops. This task requires Docker to be installed in its underlying host, since the tools it uses (Kops, Kubectl and AWS CLI) are executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools)."><img src="/automation-dashboard/styles/patterns/img/wf-icons/Kube.png" width="20px">&nbsp;<span class="name">Create_Kubernetes_Cluster</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon" class="glyphicon glyphicon-list-alt"></i></a></div><div class="task block-end ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_888" style="top: 1324px; left: 699.5px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A bash task that uses AWS CLI to delete S3 buckets used by the Kubernetes cluster (i.e., the state and OIDC stores), if the variable 'DELETE_AWS_BUCKETS' is set to TRUE. AWS CLI is executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools). This task requires then Docker to be installed in its underlying host."><img src="/automation-dashboard/styles/patterns/img/wf-icons/amazon.png" width="20px">&nbsp;<span class="name">Delete_AWS_Buckets</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon"></i></a></div><div class="task block-start ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_891" style="top: 862.5px; left: 696px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A groovy task that waits for a user action to: (i) perform a SSH connection to the Kubernetes master node, or (ii) finish the SSH connection, terminate the deployed Kubernetes cluster and eventually delete S3 buckets used by the cluster."><img src="/automation-dashboard/styles/patterns/img/wf-icons/signal-wait.png" width="20px">&nbsp;<span class="name">Wait_for_User_Action</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon"></i></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_894" style="top: 578.984px; left: 560px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A groovy task that allows to download the configuration file of the deployed Kubernetes cluster. The configuration file can be used by any Kubectl client to control the cluster."><img src="/studio/images/Groovy.png" width="20px">&nbsp;<span class="name">Download_Kubernetes_Config</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon"></i></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_897" style="top: 583px; left: 796px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A groovy task that: (i) displays information about the deployed Kubernetes cluster, and (ii) allows to download the SSH private key needed for accessing the nodes of the cluster."><img src="/studio/images/Groovy.png" width="20px">&nbsp;<span class="name">Download_Private_Key</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon"></i></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_900" style="top: 1051px; left: 433.5px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="Start a SSH connection in the browser to the kubernetes master node."><img src="/automation-dashboard/styles/patterns/img/wf-icons/ssh.png" width="20px">&nbsp;<span class="name">Start_SSH_Connection</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon" class="glyphicon glyphicon-arrow-right"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon" class="glyphicon glyphicon-list-alt"></i></a></div><div class="task block-start ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_903" style="top: 1048px; left: 690.5px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A task that finishes the SSH connection to the kubernetes master node."><img src="/automation-dashboard/styles/patterns/img/wf-icons/ssh.png" width="20px">&nbsp;<span class="name">Stop_SSH_Connection</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon" class="glyphicon glyphicon-arrow-right"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon"></i></a></div><div class="task block-end ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_906" style="top: 1050.45px; left: 958px;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A simple task to loop over user actions."><img src="/studio/images/Groovy.png" width="20px">&nbsp;<span class="name">Loop</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon"></i></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_ active-task" id="jsPlumb_1_909" style="top: 728px; left: 676.5px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A bash task that deploys the Kubernetes dashboard using kubectl. This task requires Docker to be installed in its underlying host, since Kubectl is executed in a docker container (i.e., based on the Docker image activeeon/k8s-tools)."><img src="/automation-dashboard/styles/patterns/img/wf-icons/Kube.png" width="20px">&nbsp;<span class="name">Kubernetes_Dashboard</span></a>&nbsp;&nbsp;<a id="called-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: 17px; right: 3px;"><i title="Workflows being Called by this Task" id="called-icon"></i></a><a title="Scripts being Called by this Task" id="reference-icon-a" href="javascript:void(0)" class="pointer" style=" position: inherit; top: -7px; right: 3px;"><i id="reference-icon" class="glyphicon glyphicon-list-alt"></i></a></div><svg style="position:absolute;left:741.5px;top:259.5px" width="25.5" height="80" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector "><path d="M 4.5 79 C 14.5 29 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M6.9421691249999995,59.41104325000002 L12.146694093789808,38.87052427288448 L5.704521310977334,45.46585670092708 L-1.798492455283136,40.108172086907146 L6.9421691249999995,59.41104325000002" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M6.9421691249999995,59.41104325000002 L12.146694093789808,38.87052427288448 L5.704521310977334,45.46585670092708 L-1.798492455283136,40.108172086907146 L6.9421691249999995,59.41104325000002" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:750px;top:1087.5px" width="23" height="97" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector "><path d="M 0 96 C -10 46 12 50 2 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.669624,73.1106345 L5.431344673143837,53.53068795878743 L-1.8913690613776342,59.132282692633375 L-8.547007134222792,52.752433020165064 L-2.669624,73.1106345" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.669624,73.1106345 L5.431344673143837,53.53068795878743 L-1.8913690613776342,59.132282692633375 L-8.547007134222792,52.752433020165064 L-2.669624,73.1106345" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:746px;top:378.5px" width="32.5" height="77" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector "><path d="M 11.5 76 C 21.5 26 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M13.452767999999999,57.076992000000004 L16.59833070347735,36.122149235653325 L10.84070333645364,43.322824697198556 L2.844163400675904,38.73421389919969 L13.452767999999999,57.076992000000004" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M13.452767999999999,57.076992000000004 L16.59833070347735,36.122149235653325 L10.84070333645364,43.322824697198556 L2.844163400675904,38.73421389919969 L13.452767999999999,57.076992000000004" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:750px;top:1223.5px" width="29.5" height="101" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector "><path d="M 8.5 100 C 18.5 50 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M10.529057875000001,75.71226250000001 L14.776206733730373,54.95264481152161 L8.646561543092698,61.839403834232684 L0.9033480679630488,56.83514114342891 L10.529057875000001,75.71226250000001" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M10.529057875000001,75.71226250000001 L14.776206733730373,54.95264481152161 L8.646561543092698,61.839403834232684 L0.9033480679630488,56.83514114342891 L10.529057875000001,75.71226250000001" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:754px;top:767.5px" width="24.5" height="96" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 95 C -10 45 13.5 50 3.5 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.5346063750000005,72.20064625 L5.9351463424668545,52.7773795601519 L-1.4921773654552224,58.23950941376566 L-8.02599049376749,51.734950550607124 L-2.5346063750000005,72.20064625" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.5346063750000005,72.20064625 L5.9351463424668545,52.7773795601519 L-1.4921773654552224,58.23950941376566 L-8.02599049376749,51.734950550607124 L-2.5346063750000005,72.20064625" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:423.5px;top:902.5px" width="283" height="149" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 148 C -10 98 272 50 262 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#00f" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M44.265528,107.858668 L65.37437011685341,106.01021337903802 L57.025722298139605,102.09868176097775 L59.61438387783117,93.25001908089843 L44.265528,107.858668" class="" stroke="#00f" fill="#00f" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M44.265528,107.858668 L65.37437011685341,106.01021337903802 L57.025722298139605,102.09868176097775 L59.61438387783117,93.25001908089843 L44.265528,107.858668" class="" stroke="#00f" fill="#00f" transform="translate(10.5,0.5)"></path></svg><div class="_jsPlumb_overlay l1 component label" id="jsPlumb_1_932" style="position: absolute; transform: translate(-50%, -50%); left: 564.5px; top: 976.5px;">if</div><svg style="position:absolute;left:680.5px;top:902.5px" width="26" height="146" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 145 C -10 95 15 50 5 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#00f" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.19719,111.17183 L6.279583474433032,91.75162630737236 L-1.1497142517511372,97.21107090327354 L-7.6811756222934235,90.70415055912349 L-2.19719,111.17183" class="" stroke="#00f" fill="#00f" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.19719,111.17183 L6.279583474433032,91.75162630737236 L-1.1497142517511372,97.21107090327354 L-7.6811756222934235,90.70415055912349 L-2.19719,111.17183" class="" stroke="#00f" fill="#00f" transform="translate(10.5,0.5)"></path></svg><div class="_jsPlumb_overlay l1 component label" id="jsPlumb_1_936" style="position: absolute; transform: translate(-50%, -50%); left: 693px; top: 975px;">else</div><svg style="position:absolute;left:685.5px;top:902.5px" width="283" height="148" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 262 147 C 272 97 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#00f" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M217.734472,107.038002 L202.34025160217743,92.47716485568502 L204.95642355560537,101.31773295451764 L196.61998255669505,105.25521330007966 L217.734472,107.038002" class="" stroke="#00f" fill="#00f" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M217.734472,107.038002 L202.34025160217743,92.47716485568502 L204.95642355560537,101.31773295451764 L196.61998255669505,105.25521330007966 L217.734472,107.038002" class="" stroke="#00f" fill="#00f" transform="translate(10.5,0.5)"></path></svg><div class="_jsPlumb_overlay l1 component label" id="jsPlumb_1_940" style="position: absolute; transform: translate(-50%, -50%); left: 826.5px; top: 976px;">continuation</div><svg style="position:absolute;left:637.5px;top:494.5px" width="141" height="85" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector "><path d="M 0 84 C -10 34 130 50 120 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M13.9078875,57.9714705 L34.9337822925703,55.342450117468665 L26.44598670808822,51.74282150939719 L28.705133301967482,42.80435090938044 L13.9078875,57.9714705" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M13.9078875,57.9714705 L34.9337822925703,55.342450117468665 L26.44598670808822,51.74282150939719 L28.705133301967482,42.80435090938044 L13.9078875,57.9714705" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:757.5px;top:494.5px" width="121" height="89" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector "><path d="M 100 88 C 110 38 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M89.43242,61.830692 L76.3474998293075,45.16381274422436 L77.63479903149239,54.29304385993471 L68.8098516892422,56.96143371273196 L89.43242,61.830692" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M89.43242,61.830692 L76.3474998293075,45.16381274422436 L77.63479903149239,54.29304385993471 L68.8098516892422,56.96143371273196 L89.43242,61.830692" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:832.5px;top:852.5px" width="226" height="248" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 0 C 50 -50 215 197 225 147 " transform="translate(0.5,50.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#316b31" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M60.336090000000006,12.762198000000001 L80.50098890665099,19.27194853934835 L71.4902462160493,21.2229780531611 L72.04020885348989,30.426104755397652 L60.336090000000006,12.762198000000001" class="" stroke="#316b31" fill="#316b31" transform="translate(0.5,50.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M60.336090000000006,12.762198000000001 L80.50098890665099,19.27194853934835 L71.4902462160493,21.2229780531611 L72.04020885348989,30.426104755397652 L60.336090000000006,12.762198000000001" class="" stroke="#316b31" fill="#316b31" transform="translate(0.5,50.5)"></path></svg><div class="_jsPlumb_overlay l1 component label" id="jsPlumb_1_952" style="position: absolute; transform: translate(-50%, -50%); left: 960px; top: 976px;">loop</div><svg style="position:absolute;left:757.5px;top:622.5px" width="121" height="106" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 105 C -10 55 110 50 100 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M11.113502499999997,76.03736625 L31.133695424830258,69.09532942695043 L22.08306688818177,67.33859293800168 L22.434922112831934,58.125765038768655 L11.113502499999997,76.03736625" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M11.113502499999997,76.03736625 L31.133695424830258,69.09532942695043 L22.08306688818177,67.33859293800168 L22.434922112831934,58.125765038768655 L11.113502499999997,76.03736625" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:637.5px;top:618.5px" width="141" height="110" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 120 109 C 130 59 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M105.4272,78.951232 L92.94693930163368,61.82688988414595 L93.90680239889473,70.99633167928901 L84.99203898092267,73.34728748525123 L105.4272,78.951232" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M105.4272,78.951232 L92.94693930163368,61.82688988414595 L93.90680239889473,70.99633167928901 L84.99203898092267,73.34728748525123 L105.4272,78.951232" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 746.5px; top: 369px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 746.5px; top: 329px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 742px; top: 250px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 750.5px; top: 1214px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 750.5px; top: 1174px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 758px; top: 485px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 758px; top: 445px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable" style="position: absolute; height: 20px; width: 20px; left: 759px; top: 1354px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 759px; top: 1314px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable" style="position: absolute; height: 20px; width: 20px; left: 754.5px; top: 893px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 754.5px; top: 853px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint if-source-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 686px; top: 893px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#00f" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint loop-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 823px; top: 893px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#316b31" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 638px; top: 609px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 638px; top: 569px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 858px; top: 613px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 858px; top: 573px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable" style="position: absolute; height: 20px; width: 20px; left: 496px; top: 1081px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint if-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 424px; top: 1041px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#00f" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 752.5px; top: 1078px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint if-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 681px; top: 1038px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#00f" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable" style="position: absolute; height: 20px; width: 20px; left: 998px; top: 1080px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint if-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 948px; top: 1040px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#00f" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint loop-source-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 1048px; top: 1040px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#316b31" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 758px; top: 758px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 758px; top: 718px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div></div></div>
    </body>
</html>
 ]]>
    </visualization>
  </metadata>
</job>
