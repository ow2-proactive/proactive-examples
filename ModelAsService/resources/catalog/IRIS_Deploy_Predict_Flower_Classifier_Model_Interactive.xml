<?xml version="1.0" encoding="UTF-8"?>
<job
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="urn:proactive:jobdescriptor:3.14" xsi:schemaLocation="urn:proactive:jobdescriptor:3.14 http://www.activeeon.com/public_content/schemas/proactive/jobdescriptor/3.14/schedulerjob.xsd"  name="IRIS_Deploy_Predict_Flower_Classifier_Model_Interactive" tags="Services,Azure,Model deployment,Samples,Model Management" projectName="2. MaaS_ML Examples" priority="normal" onTaskError="continueJobExecution"  maxNumberOfExecution="2"  >
  <variables>
    <variable model="PA:LIST(.,$HOME/,$WORK/,$SCRATCH/)" name="WORK_DIR" value="." description="Working directory for the data space used to transfer files automatically between the workflow tasks." hidden="false" advanced="false"/>
    <variable name="CONTAINER_PLATFORM" value="docker" model="PA:LIST(no-container,docker,podman,singularity)" description="Container platform used for executing the workflow tasks." group="Container Parameters" advanced="true" hidden="false"/>
    <variable name="CONTAINER_GPU_ENABLED" value="False" model="PA:Boolean" description="If True, it will activate the use of GPU for the workflow tasks on the selected container platform." group="Container Parameters" advanced="true" hidden="false"/>
    <variable name="CONTAINER_IMAGE" value="" model="PA:LIST(,docker://activeeon/dlm3,docker://activeeon/cuda,docker://activeeon/cuda2,docker://activeeon/rapidsai,docker://activeeon/nvidia:rapidsai)" description="Name of the container image being used to run the workflow tasks." group="Container Parameters" advanced="true" hidden="false"/>
    <variable name="MODEL_SERVICE_INSTANCE_NAME" value="maas-ml-${PA_JOB_ID}"  description="The service instance name." group="MaaS_ML Service Configuration" advanced="true" hidden="false"/>
    <variable name="MODEL_SERVICE_PROXYFIED" value="True" model="PA:Boolean" description="True if a proxy is needed to protect the access to this model-service endpoint." group="MaaS_ML Service Configuration" advanced="false" hidden="false"/>
    <variable name="MODEL_SERVICE_ENTRYPOINT" value="ml_service"  description="This entry script starts the service and defines the different functions to deploy the model, scores the prediction requests based on the deployed model, and returns the results." group="MaaS_ML Service Configuration" advanced="true" hidden="false"/>
    <variable name="MODEL_SERVICE_YAML_FILE" value="ml_service-api"  description="A YAML file that describes the OpenAPI Specification ver. 2 (known as Swagger Spec) of the service. This file should be stored in the catalog under the model_as_service_resources bucket." group="MaaS_ML Service Configuration" advanced="true" hidden="false"/>
    <variable name="MODEL_SERVICE_USER_NAME" value="user"  description="A valid username having the needed privileges to execute this action." group="MaaS_ML Service Configuration" advanced="false" hidden="false"/>
    <variable name="MODEL_SERVICE_NODE_NAME" value=""  description="The name of the node where the service will be deployed. If empty, the service will be deployed on an available node selected randomly." group="Resource Management" advanced="false" hidden="false"/>
    <variable name="USE_NVIDIA_RAPIDS" value="False" model="PA:Boolean" description="If True, the service will be configured to use the GPU and the Nvidia Rapids library." group="MaaS_ML Service Configuration" advanced="false" hidden="false"/>
    <variable name="SERVICE_TOKEN" value=""  description="A valid token generated by the MaaS_ML Service for user authentication."  advanced="false" hidden="false"/>
    <variable name="DRIFT_DETECTION_WINDOW_SIZE" value="50"  description="The size of the data to be extracted from the old training dataset to be used as a baseline data for the drift detection."  advanced="false" hidden="false"/>
    <variable name="DATA_DRIFT_DETECTOR" value="HDDM" model="PA:LIST(HDDM,Page Hinkley, ADWIN)" description="The name of the data drift detector to be used in the drift detection process."  advanced="false" hidden="false"/>
  </variables>
  <description>
    <![CDATA[ Train an Iris Flower Classifier, deploy it in a service and call the prediction endpoint to do the predictions. ]]>
  </description>
  <genericInformation>
    <info name="bucketName" value="ai-model-as-a-service"/>
    <info name="workflow.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/model_as_service.png"/>
    <info name="Documentation" value="PAIO/PAIOUserGuide.html#_deployment_pipeline_examples"/>
    <info name="group" value="public-objects"/>
  </genericInformation>
  <taskFlow>
    <task name="Wait_for_Signal" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ A template task that sends a ready notification for all the signals specified in the variable SIGNALS, then loops until one signal among those specified is received by the job. ]]>
      </description>
      <variables>
        <variable name="SIGNALS" value="Terminate_Job_and_Service,Make_New_Prediction" inherited="false"  description="The list of comma-separated signals expected by this task."  advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/signal-wait.png"/>
        <info name="TASK.DOCUMENTATION" value="user/ProActiveUserGuide.html#_task_signal_api"/>
      </genericInformation>
      <depends>
        <task ref="MaaS_ML_Call_Prediction"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
import com.google.common.base.Splitter;

public static boolean containsIgnoreCase(String str, String searchStr) {
    if(str == null || searchStr == null) return false;
    final int length = searchStr.length();
    if (length == 0)
        return true;
    for (int i = str.length() - length; i >= 0; i--) {
        if (str.regionMatches(true, i, searchStr, 0, length))
            return true;
    }
    return false;
}

if (variables.get("PA_TASK_ITERATION_SIGNAL")==null){
	variables.put("PA_TASK_ITERATION_SIGNAL",0)
}
if (variables.get("PA_TASK_ITERATION_SIGNAL")==0){
    
    // Read the variable SIGNALS
	signals = variables.get("SIGNALS")

	// Split the value of the variable SIGNALS and transform it into a list
	Set signalsSet = new HashSet<>(Splitter.on(',').trimResults().omitEmptyStrings().splitToList(signals))
    
    // Send a ready notification for each signal in the set
    println("Ready for signals "+ signalsSet)
    signalsSet.each { 
        signal -> signalapi.readyForSignal(signal)
    }
    
    // Add the signals set as a variable to be used by next tasks
    variables.put("SIGNALS_SET", signalsSet)
}
variables.put("PA_TASK_ITERATION_SIGNAL",variables.get("PA_TASK_ITERATION_SIGNAL")+1)

//Read the variable SIGNALS_SET
Set signalsSet =  variables.get("SIGNALS_SET")

// Check whether one signal among those specified as input is received
println("Checking whether one signal in the set "+ signalsSet +" is received")
receivedSignals = signalapi.checkForSignals(signalsSet)

// If a signal is received, remove ready signals and break the loop, else sleep 10 seconds then restart
if (receivedSignals != null && !receivedSignals.isEmpty()) {    
    // remove ready signals
	signalapi.removeManySignals(new HashSet<>(signalsSet.collect { signal -> "ready_"+signal }))    

    // Print the received signal
    println("Received signals: " + receivedSignals.toString())
    terminate = false
    for (String s : Arrays.asList(receivedSignals.keySet())) {
        if (containsIgnoreCase(s, "Make_New_Prediction") && !terminate) {
            result = "Make_New_Prediction"
        }
        else if (containsIgnoreCase(s, "Terminate_Job_and_Service")) {
            result = "Terminate_Job_and_Service"
            terminate = true
        }
    }
    
} else {
    result = null    
}
variables.put("RECEIVED_SIGNAL", result)
]]>
          </code>
        </script>
      </scriptExecutable>
      <controlFlow >
        <loop target="Wait_for_Signal">
          <script>
            <code language="groovy">
              <![CDATA[
if (result!=null){
    loop = false
} else {
    loop = "* * * * *"
}
]]>
            </code>
          </script>
        </loop>
      </controlFlow>
      <metadata>
        <positionTop>
            800.75
        </positionTop>
        <positionLeft>
            184.25
        </positionLeft>
      </metadata>
    </task>
    <task name="Start" 
    
    
    
    
    fork="true">
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/controls_loop.png"/>
        <info name="Documentation" value="user/ProActiveUserGuide.html#_loop"/>
      </genericInformation>
      <depends>
        <task ref="Get_Parameters"/>
      </depends>
      <forkEnvironment javaHome="/usr" >
        <envScript>
          <script>
            <file url="${PA_CATALOG_REST_URL}/buckets/scripts/resources/fork_env_ai/raw" language="groovy"></file>
          </script>
        </envScript>
      </forkEnvironment>
      <scriptExecutable>
        <script>
          <code language="cpython">
            <![CDATA[
import urllib.request
import ssl
import pandas as pd

global variables

# -------------------------------------------------------------
# Import an external python script containing a collection of
# common utility Python functions and classes
#PA_CATALOG_REST_URL = variables.get("PA_CATALOG_REST_URL")
#PA_PYTHON_UTILS_URL = PA_CATALOG_REST_URL + "/buckets/ai-machine-learning/resources/Utils_Script/raw"
#if PA_PYTHON_UTILS_URL.startswith('https'):
#    exec(urllib.request.urlopen(PA_PYTHON_UTILS_URL, context=ssl._create_unverified_context()).read(), globals())
#else:
#    exec(urllib.request.urlopen(PA_PYTHON_UTILS_URL).read(), globals())
#global get_input_variables
#global raiser_ex
# -------------------------------------------------------------

input_variables = {
    'task.dataframe_id_test': None,
    'task.dataframe_id': None,
    'task.label_column': None,
    'task.feature_names': None,
}
#get_input_variables(input_variables)
input_variables['task.dataframe_id_test'] = variables.get("task.dataframe_id_test")
input_variables['task.label_column'] = variables.get("task.label_column")
input_variables['task.feature_names'] = variables.get("task.feature_names")

resultMetadata.put("task.dataframe_id_test", input_variables['task.dataframe_id_test'])
resultMetadata.put("task.label_column", input_variables['task.label_column'])
resultMetadata.put("task.feature_names", input_variables['task.feature_names'])

print("Loop block start ", str(variables.get('PA_TASK_ITERATION')))
]]>
          </code>
        </script>
      </scriptExecutable>
      <controlFlow block="start"></controlFlow>
      <metadata>
        <positionTop>
            629.75
        </positionTop>
        <positionLeft>
            325.25
        </positionLeft>
      </metadata>
    </task>
    <task name="Loop" 
    
    
    
    
    fork="true">
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/controls_loop.png"/>
      </genericInformation>
      <depends>
        <task ref="Wait_for_Signal"/>
      </depends>
      <scriptExecutable>
        <script>
          <code language="javascript">
            <![CDATA[
variables.remove("PA_TASK_ITERATION_SIGNAL")
print('Loop block end ' + variables.get('PA_TASK_ITERATION'))
]]>
          </code>
        </script>
      </scriptExecutable>
      <controlFlow  block="end">
        <loop target="Start">
          <script>
            <code language="groovy">
              <![CDATA[
if("Make_New_Prediction".equalsIgnoreCase(variables.get('RECEIVED_SIGNAL'))) {
    loop = true;
} else {
    loop = false;
}
]]>
            </code>
          </script>
        </loop>
      </controlFlow>
      <metadata>
        <positionTop>
            935.734375
        </positionTop>
        <positionLeft>
            297.25
        </positionLeft>
      </metadata>
    </task>
    <task name="Get_Parameters" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ The simplest task, ran by a Python engine. ]]>
      </description>
      <depends>
        <task ref="MaaS_ML_Deploy_Model"/>
        <task ref="Split_Data"/>
      </depends>
      <forkEnvironment javaHome="/usr" >
        <envScript>
          <script>
            <file url="${PA_CATALOG_REST_URL}/buckets/scripts/resources/fork_env_ai/raw" language="groovy"></file>
          </script>
        </envScript>
      </forkEnvironment>
      <scriptExecutable>
        <script>
          <code language="cpython">
            <![CDATA[
import urllib.request
import ssl
import pandas as pd

global variables

# -------------------------------------------------------------
# Get schedulerapi access and acquire session id
schedulerapi.connect()
sessionid = schedulerapi.getSession()

# -------------------------------------------------------------
# Import an external python script containing a collection of
# common utility Python functions and classes

SERVICE_TOKEN = variables.get("SERVICE_TOKEN")
PA_CATALOG_REST_URL = variables.get("PA_CATALOG_REST_URL")
PA_PYTHON_UTILS_URL = PA_CATALOG_REST_URL + "/buckets/ai-machine-learning/resources/Utils_Script/raw"
req = urllib.request.Request(PA_PYTHON_UTILS_URL)
req.add_header('sessionid', sessionid)
if PA_PYTHON_UTILS_URL.startswith('https'):
    content = urllib.request.urlopen(req, context=ssl._create_unverified_context()).read()
else:
    content = urllib.request.urlopen(req).read()
exec(content, globals())

global get_input_variables
global raiser_ex
# -------------------------------------------------------------

input_variables = {
    'task.dataframe_id_test': None,
    'task.dataframe_id': None,
    'task.label_column': None,
    'task.feature_names': None,
}
get_input_variables(input_variables)

#resultMetadata.put("task.dataframe_id_test", input_variables['task.dataframe_id_test'])
#resultMetadata.put("task.label_column", input_variables['task.label_column'])
#resultMetadata.put("task.feature_names", input_variables['task.feature_names'])

variables.put("task.dataframe_id_test",input_variables['task.dataframe_id_test'])
variables.put("task.label_column",input_variables['task.label_column'])
variables.put("task.feature_names",input_variables['task.feature_names'])

variables.put("SERVICE_TOKEN", SERVICE_TOKEN)
]]>
          </code>
        </script>
      </scriptExecutable>
      <metadata>
        <positionTop>
            508.75
        </positionTop>
        <positionLeft>
            386.25
        </positionLeft>
      </metadata>
    </task>
    <task name="Load_Iris_Dataset" 
    
    
    
    preciousResult="true" 
    fork="true">
      <description>
        <![CDATA[ Load and return the iris dataset classification. ]]>
      </description>
      <variables>
        <variable name="TASK_ENABLED" value="True" inherited="false" model="PA:Boolean" description="If False, the task will be ignored, it will not be executed."  advanced="false" hidden="false"/>
        <variable name="IMPORT_FROM" value="PA:URL" inherited="false" model="PA:LIST(PA:URL,PA:URI,PA:USER_FILE,PA:GLOBAL_FILE)" description="Method/protocol to import the data from the data source."  advanced="false" hidden="false"/>
        <variable name="FILE_PATH" value="https://s3.eu-west-2.amazonaws.com/activeeon-public/datasets/iris.csv" inherited="false" model="$IMPORT_FROM" description="Path or name of the file that contains the dataset."  advanced="false" hidden="false"/>
        <variable name="FILE_DELIMITER" value="," inherited="false"  description="Delimiter to use."  advanced="false" hidden="false"/>
        <variable name="LABEL_COLUMN" value="species" inherited="false"  description="Label/class column name."  advanced="false" hidden="false"/>
        <variable name="LIMIT_OUTPUT_VIEW" value="-1" inherited="false" model="PA:Integer" description="Number of rows that will be previewed in the browser."  advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/load_dataset.png"/>
        <info name="task.documentation" value="PAIO/PAIOUserGuide.html#_load_iris_dataset"/>
      </genericInformation>
      <forkEnvironment javaHome="/usr" >
        <envScript>
          <script>
            <file url="${PA_CATALOG_REST_URL}/buckets/scripts/resources/fork_env_ai/raw" language="groovy"></file>
          </script>
        </envScript>
      </forkEnvironment>
      <scriptExecutable>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/ai-machine-learning/resources/Load_Iris_Dataset_Script/raw" language="cpython"></file>
        </script>
      </scriptExecutable>
      <controlFlow block="none"></controlFlow>
      <metadata>
        <positionTop>
            14.75
        </positionTop>
        <positionLeft>
            438.734375
        </positionLeft>
      </metadata>
    </task>
    <task name="Split_Data" 
    
    
    
    preciousResult="true" 
    fork="true">
      <description>
        <![CDATA[ Separate data into training and testing sets. ]]>
      </description>
      <variables>
        <variable name="TASK_ENABLED" value="True" inherited="false" model="PA:Boolean" description="If False, the task will be ignored, it will not be executed."  advanced="false" hidden="false"/>
        <variable name="TRAIN_SIZE" value="0.7" inherited="false"  description="Float number within the range (0.0, 1.0), not including the values 0.0 and 1.0."  advanced="false" hidden="false"/>
        <variable name="LIMIT_OUTPUT_VIEW" value="100" inherited="false" model="PA:Integer" description="Number of rows that will be previewed in the browser."  advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/data-processing.png"/>
        <info name="task.documentation" value="PAIO/PAIOUserGuide.html#_split_data"/>
      </genericInformation>
      <depends>
        <task ref="Load_Iris_Dataset"/>
      </depends>
      <forkEnvironment javaHome="/usr" >
        <envScript>
          <script>
            <file url="${PA_CATALOG_REST_URL}/buckets/scripts/resources/fork_env_ai/raw" language="groovy"></file>
          </script>
        </envScript>
      </forkEnvironment>
      <scriptExecutable>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/ai-machine-learning/resources/Split_Data_Script/raw" language="cpython"></file>
        </script>
      </scriptExecutable>
      <controlFlow block="none"></controlFlow>
      <metadata>
        <positionTop>
            134.734375
        </positionTop>
        <positionLeft>
            456.734375
        </positionLeft>
      </metadata>
    </task>
    <task name="Support_Vector_Machines" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ Support Vector Machines are supervised learning models with associated learning algorithms that analyze data used for classification. ]]>
      </description>
      <variables>
        <variable name="TASK_ENABLED" value="True" inherited="false" model="PA:Boolean" description="If False, the task will be ignored, it will not be executed."  advanced="false" hidden="false"/>
        <variable name="INPUT_VARIABLES" value="{&quot;probability&quot;: true}" inherited="false"  description="Parameters&#39; values of the support vector machines algorithm."  advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/ml_classification.png"/>
        <info name="task.documentation" value="PAIO/PAIOUserGuide.html#_support_vector_machines"/>
      </genericInformation>
      <forkEnvironment javaHome="/usr" >
        <envScript>
          <script>
            <file url="${PA_CATALOG_REST_URL}/buckets/scripts/resources/fork_env_ai/raw" language="groovy"></file>
          </script>
        </envScript>
      </forkEnvironment>
      <pre>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/ai-auto-ml-optimization/resources/get_automl_params/raw" language="groovy"></file>
        </script>
      </pre>
      <scriptExecutable>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/ai-machine-learning/resources/Support_Vector_Machine_Script/raw" language="cpython"></file>
        </script>
      </scriptExecutable>
      <controlFlow block="none"></controlFlow>
      <metadata>
        <positionTop>
            56.734375
        </positionTop>
        <positionLeft>
            254.75
        </positionLeft>
      </metadata>
    </task>
    <task name="Train_Model" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ Train a classification/clustering/anomaly detection model. ]]>
      </description>
      <variables>
        <variable name="TASK_ENABLED" value="True" inherited="false" model="PA:Boolean" description="If False, the task will be ignored, it will not be executed."  advanced="false" hidden="false"/>
        <variable name="LABEL_COLUMN" value="species" inherited="false"  description="Label/class column name."  advanced="false" hidden="false"/>
        <variable name="N_SPLITS" value="5" inherited="false" model="PA:Integer" description="Number of splits you want to perform on the data."  advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/train.png"/>
        <info name="task.documentation" value="PAIO/PAIOUserGuide.html#_train_model"/>
      </genericInformation>
      <depends>
        <task ref="Split_Data"/>
        <task ref="Support_Vector_Machines"/>
      </depends>
      <forkEnvironment javaHome="/usr" >
        <envScript>
          <script>
            <file url="${PA_CATALOG_REST_URL}/buckets/scripts/resources/fork_env_ai/raw" language="groovy"></file>
          </script>
        </envScript>
      </forkEnvironment>
      <pre>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/ai-auto-ml-optimization/resources/get_automl_token/raw" language="groovy"></file>
        </script>
      </pre>
      <scriptExecutable>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/ai-machine-learning/resources/Train_Model_Script/raw" language="cpython"></file>
        </script>
      </scriptExecutable>
      <controlFlow block="none"></controlFlow>
      <metadata>
        <positionTop>
            245.75
        </positionTop>
        <positionLeft>
            315.75
        </positionLeft>
      </metadata>
    </task>
    <task name="MaaS_ML_Service_Start" 
    
    onTaskError="cancelJob" 
    
    
    fork="true">
      <description>
        <![CDATA[ Start a model server to deploy ML models. ]]>
      </description>
      <variables>
        <variable inherited="false" name="SERVICE_ACTIVATION_WORKFLOW" value="service-automation/MaaS_ML" model="PA:CATALOG_OBJECT(Workflow/psa,,,MaaS_ML%)" group="Service Parameters" description="The service activation workflow. Please keep the default value for this variable." advanced="false" hidden="false"/>
        <variable name="INSTANCE_NAME" value="$MODEL_SERVICE_INSTANCE_NAME" inherited="false"  description="The name of the service that will be deployed." group="Service Parameters" advanced="false" hidden="false"/>
        <variable name="ENGINE" value="$CONTAINER_PLATFORM" inherited="false"  description="The container platform that will be used (no container, docker, singularity, or podman)." group="Service Parameters" advanced="false" hidden="false"/>
        <variable name="PROXYFIED" value="$MODEL_SERVICE_PROXYFIED" inherited="false"  description="True if a proxy is needed to protect the access to this model-service endpoint. It takes by default the value of MODEL_SERVICE_PROXYFIED workflow variable." group="Service Parameters" advanced="false" hidden="false"/>
        <variable name="PYTHON_ENTRYPOINT" value="$MODEL_SERVICE_ENTRYPOINT" inherited="false"  description="This entry script starts the service and defines the different functions to deploy the model, scores the prediction requests based on the deployed model, and returns the results. This script is specific to your model. It takes by default the value of MODEL_SERVICE_ENTRYPOINT workflow variable." group="MaaS_ML Service Configuration" advanced="false" hidden="false"/>
        <variable name="YAML_FILE" value="$MODEL_SERVICE_YAML_FILE" inherited="false"  description="A YAML file that describes the OpenAPI Specification ver. 2 (known as Swagger Spec) of the service. This file should be stored in the catalog under the model_as_service_resources bucket.   It takes by default the value of MODEL_SERVICE_YAML_FILE workflow variable." group="MaaS_ML Service Configuration" advanced="false" hidden="false"/>
        <variable name="USER_NAME" value="$MODEL_SERVICE_USER_NAME" inherited="false"  description="A valid username having the needed privileges to execute this action. It takes by default the value of MODEL_SERVICE_USER_NAME workflow variable." group="MaaS_ML Service Configuration" advanced="false" hidden="false"/>
        <variable name="NODE_NAME" value="$MODEL_SERVICE_NODE_NAME" inherited="false"  description="The name of the node where the service will be deployed. If empty, the service will be deployed on an available node selected randomly. It takes by default the value of MODEL_SERVICE_NODE_NAME workflow variable." group="Resource Management" advanced="false" hidden="false"/>
        <variable name="GPU_ENABLED" value="$USE_NVIDIA_RAPIDS" inherited="false"  description="If True, the service will be configured to use the GPU and the Nvidia Rapids library." group="Resource Management" advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/model_as_service.png"/>
        <info name="task.documentation" value="PAIO/PAIOUserGuide.html#_start_a_generic_service_instance"/>
      </genericInformation>
      <scriptExecutable>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/service-automation/resources/Service_Start/raw" language="groovy">
            <arguments>
              <argument value="true"/>
              <argument value="NATIVE_SCHEDULER"/>
              <argument value="NATIVE_SCHEDULER_PARAMS"/>
              <argument value="ENGINE"/>
              <argument value="PROXYFIED"/>
              <argument value="PYTHON_ENTRYPOINT"/>
              <argument value="YAML_FILE"/>
              <argument value="NODE_NAME"/>
              <argument value="GPU_ENABLED"/>
              <argument value="DRIFT_ENABLED"/>
              <argument value="DRIFT_NOTIFICATION"/>
            </arguments>
          </file>
        </script>
      </scriptExecutable>
      <controlFlow block="none"></controlFlow>
      <post>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/ai-model-as-a-service/resources/MaaS_Start_Post_Script/raw" language="cpython"></file>
        </script>
      </post>
      <metadata>
        <positionTop>
            240.734375
        </positionTop>
        <positionLeft>
            104.75
        </positionLeft>
      </metadata>
    </task>
    <task name="MaaS_ML_Deploy_Model" 
    
    
    
    
    fork="true">
      <description>
        <![CDATA[ Deploy a ML model. ]]>
      </description>
      <variables>
        <variable name="DEPLOY_MODEL_ENDPOINT" value="" inherited="false"  description="A URL endpoint defined by the user where the AI Model was deployed."  advanced="false" hidden="false"/>
        <variable name="API_EXTENSION" value="/api/deploy" inherited="false"  description="The base path to access the deployment endpoint."  advanced="false" hidden="false"/>
        <variable name="MODEL_URL" value="https://activeeon-public.s3.eu-west-2.amazonaws.com/models" inherited="false"  description="A valid URL specified by the user referencing the model that needs to be deployed."  advanced="false" hidden="false"/>
        <variable name="SERVICE_TOKEN" value="" inherited="true"  description="A valid token generated by the MaaS_ML Service for user authentication."  advanced="false" hidden="false"/>
        <variable name="DRIFT_DETECTION_WINDOW_SIZE" value="50" inherited="true"  description="The size of the data to be extracted from the old training dataset to be used as a baseline data for the drift detection."  advanced="false" hidden="false"/>
        <variable name="LOG_PREDICTIONS" value="true" inherited="false" model="PA:Boolean" description="If true, the resulted predictions will be logged in the traceability page."  advanced="false" hidden="false"/>
        <variable name="MODEL_NAME" value="IRIS_flowers_classifier" inherited="false"  description="The name of the model to be deployed."  advanced="false" hidden="false"/>
        <variable name="MODEL_VERSION" value="1" inherited="false" model="PA:Integer" description="The version number of the model that will be deployed."  advanced="false" hidden="false"/>
        <variable name="BASELINE_DATA_URL" value="" inherited="false"  description="The URL of the dataset to be deployed and used in the data drift detection process."  advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/model_as_service.png"/>
        <info name="task.documentation" value="PAIO/PAIOUserGuide.html#_deploy_a_specific_ml_model"/>
      </genericInformation>
      <depends>
        <task ref="Train_Model"/>
        <task ref="MaaS_ML_Service_Start"/>
      </depends>
      <forkEnvironment javaHome="/usr" >
        <envScript>
          <script>
            <file url="${PA_CATALOG_REST_URL}/buckets/scripts/resources/fork_env_ai/raw" language="groovy"></file>
          </script>
        </envScript>
      </forkEnvironment>
      <scriptExecutable>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/ai-model-as-a-service/resources/MaaS_ML_Deploy_Model_Script/raw" language="cpython"></file>
        </script>
      </scriptExecutable>
      <metadata>
        <positionTop>
            381.734375
        </positionTop>
        <positionLeft>
            194.734375
        </positionLeft>
      </metadata>
    </task>
    <task name="MaaS_ML_Call_Prediction" 
    
    
    
    preciousResult="true" 
    fork="true">
      <description>
        <![CDATA[ Call the launched service to predict results based on the last deployed model. ]]>
      </description>
      <variables>
        <variable name="PREDICT_MODEL_ENDPOINT" value="" inherited="false"  description="The endpoint of the started service."  advanced="false" hidden="false"/>
        <variable name="SERVICE_TOKEN" value="" inherited="true"  description="A valid token generated by the MaaS_ML Service for user authentication."  advanced="false" hidden="false"/>
        <variable name="PREDICT_EXTENSION" value="/api/predict" inherited="false"  description="The base path to access the prediction endpoint."  advanced="false" hidden="false"/>
        <variable name="INPUT_DATA" value="" inherited="false"  description="Entry data that needs to be scored by the deployed model."  advanced="false" hidden="false"/>
        <variable name="LABEL_COLUMN" value="species" inherited="false"  description="The name of the label column. It needs to be set if data is labeled."  advanced="false" hidden="false"/>
        <variable name="DATA_DRIFT_DETECTOR" value="HDDM" inherited="true" model="PA:LIST(HDDM,Page Hinkley, ADWIN)" description="Name of the data drift detector to be used in the drift detection process."  advanced="false" hidden="false"/>
        <variable name="MODEL_NAME" value="IRIS_flowers_classifier" inherited="false"  description="The name of the model to be deployed."  advanced="false" hidden="false"/>
        <variable name="MODEL_VERSION" value="1" inherited="false" model="PA:Integer" description="The version number of the model that will be deployed."  advanced="false" hidden="false"/>
        <variable name="SAVE_PREDICTIONS" value="True" inherited="false" model="PA:Boolean" description="Save the resulted predictions in order to be able to display them through the data analytics dashboard."  advanced="false" hidden="false"/>
        <variable name="DRIFT_ENABLED" value="True" inherited="false" model="PA:Boolean" description="True if a detector is needed to detect data drifts in the input data based on the baseline data."  advanced="false" hidden="false"/>
        <variable name="DRIFT_NOTIFICATION" value="False" inherited="false" model="PA:Boolean" description="True if the user needs to get a notification via Proactive if a data drift is detected."  advanced="false" hidden="false"/>
        <variable name="LIMIT_OUTPUT_VIEW" value="-1" inherited="false"    advanced="false" hidden="true"  description="Maximum number of rows displayed in the output"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/model_as_service.png"/>
        <info name="task.documentation" value="PAIO/PAIOUserGuide.html#_call_the_service_for_predicition"/>
      </genericInformation>
      <depends>
        <task ref="Start"/>
      </depends>
      <forkEnvironment javaHome="/usr" >
        <envScript>
          <script>
            <file url="${PA_CATALOG_REST_URL}/buckets/scripts/resources/fork_env_ai/raw" language="groovy"></file>
          </script>
        </envScript>
      </forkEnvironment>
      <scriptExecutable>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/ai-model-as-a-service/resources/MaaS_ML_Call_Prediction_Script/raw" language="cpython"></file>
        </script>
      </scriptExecutable>
      <post>
        <script>
          <code language="cpython">
            <![CDATA[

]]>
          </code>
        </script>
      </post>
      <metadata>
        <positionTop>
            710.75
        </positionTop>
        <positionLeft>
            159.25
        </positionLeft>
      </metadata>
    </task>
    <task name="MaaS_ML_Actions" 
    
    onTaskError="cancelJob" 
    
    
    fork="true">
      <description>
        <![CDATA[ Manage the life-cycle of MaaS_ML. This workflow trigger three possible actions: Pause_MaaS_ML, Resume_MaaS_ML and Finish_MaaS_ML. ]]>
      </description>
      <variables>
        <variable name="SERVICE_ACTION_WORKFLOW" value="service-automation/Finish_MaaS_ML" inherited="false" model="PA:CATALOG_OBJECT(Workflow/psa,,,%MaaS_ML)" description="The action that will be processed regarding the service status." group="" advanced="false" hidden="false"/>
        <variable name="INSTANCE_NAME" value="$MODEL_SERVICE_INSTANCE_NAME" inherited="true"  description="The name of the service that the action will be processed on."  advanced="false" hidden="false"/>
        <variable name="INSTANCE_ID" value="" inherited="false"  description="The service instance ID."  advanced="false" hidden="false"/>
      </variables>
      <genericInformation>
        <info name="task.icon" value="/automation-dashboard/styles/patterns/img/wf-icons/model_as_service.png"/>
        <info name="task.documentation" value="PAIO/PAIOUserGuide.html#_delete_finish_the_service"/>
      </genericInformation>
      <depends>
        <task ref="Loop"/>
      </depends>
      <scriptExecutable>
        <script>
          <file url="${PA_CATALOG_REST_URL}/buckets/service-automation/resources/Service_Action/raw" language="groovy"></file>
        </script>
      </scriptExecutable>
      <controlFlow block="none"></controlFlow>
      <metadata>
        <positionTop>
            1090.75
        </positionTop>
        <positionLeft>
            286.25
        </positionLeft>
      </metadata>
    </task>
  </taskFlow>
  <metadata>
    <visualization>
      <![CDATA[ <html>
    <head>
    <link rel="stylesheet" href="/studio/styles/studio-standalone.css">
        <style>
        #workflow-designer {
            left:0 !important;
            top:0 !important;
            width:2030px;
            height:2284px;
            }
        </style>
    </head>
    <body>
    <div id="workflow-visualization-view"><div id="workflow-visualization" style="position:relative;top:-9.75px;left:-99.75px"><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_1371" style="top: 800.75px; left: 184.25px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="A template task that sends a ready notification for all the signals specified in the variable SIGNALS, then loops until one signal among those specified is received by the job."><img src="/automation-dashboard/styles/patterns/img/wf-icons/signal-wait.png" width="20px">&nbsp;<span class="name">Wait_for_Signal</span></a></div><div class="task block-start ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_1374" style="top: 629.75px; left: 325.25px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="This task has no description"><img src="/automation-dashboard/styles/patterns/img/wf-icons/controls_loop.png" width="20px">&nbsp;<span class="name">Start</span></a></div><div class="task block-end ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_1377" style="top: 935.734px; left: 297.25px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="This task has no description"><img src="/automation-dashboard/styles/patterns/img/wf-icons/controls_loop.png" width="20px">&nbsp;<span class="name">Loop</span></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_1380" style="top: 508.75px; left: 386.25px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="The simplest task, ran by a Python engine."><img src="/studio/images/Python.png" width="20px">&nbsp;<span class="name">Get_Parameters</span></a></div><div class="task _jsPlumb_endpoint_anchor_ ui-draggable" id="jsPlumb_1_1383" style="top: 14.75px; left: 438.734px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="Load and return the iris dataset classification."><img src="/automation-dashboard/styles/patterns/img/wf-icons/load_dataset.png" width="20px">&nbsp;<span class="name">Load_Iris_Dataset</span></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_1386" style="top: 134.734px; left: 456.734px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="Separate data into training and testing sets."><img src="/automation-dashboard/styles/patterns/img/wf-icons/data-processing.png" width="20px">&nbsp;<span class="name">Split_Data</span></a></div><div class="task _jsPlumb_endpoint_anchor_ ui-draggable" id="jsPlumb_1_1389" style="top: 56.7344px; left: 254.75px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="Support Vector Machines are supervised learning models with associated learning algorithms that analyze data used for classification."><img src="/automation-dashboard/styles/patterns/img/wf-icons/ml_classification.png" width="20px">&nbsp;<span class="name">Support_Vector_Machines</span></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_1392" style="top: 245.75px; left: 315.75px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="Train a classification/clustering/anomaly detection model."><img src="/automation-dashboard/styles/patterns/img/wf-icons/train.png" width="20px">&nbsp;<span class="name">Train_Model</span></a></div><div class="task _jsPlumb_endpoint_anchor_ ui-draggable active-task" id="jsPlumb_1_1395" style="top: 240.734px; left: 104.75px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="Start a model server to deploy ML models."><img src="/automation-dashboard/styles/patterns/img/wf-icons/model_as_service.png" width="20px">&nbsp;<span class="name">MaaS_ML_Service_Start</span></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_1398" style="top: 381.734px; left: 194.734px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="Deploy a ML model."><img src="/automation-dashboard/styles/patterns/img/wf-icons/model_as_service.png" width="20px">&nbsp;<span class="name">MaaS_ML_Deploy_Model</span></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_1401" style="top: 710.75px; left: 159.25px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="Call the launched service to predict results based on the last deployed model."><img src="/automation-dashboard/styles/patterns/img/wf-icons/model_as_service.png" width="20px">&nbsp;<span class="name">MaaS_ML_Call_Prediction</span></a></div><div class="task ui-draggable _jsPlumb_endpoint_anchor_" id="jsPlumb_1_1404" style="top: 1090.75px; left: 286.25px; z-index: 24;"><a class="task-name" data-toggle="tooltip" data-placement="right" title="Manage the life-cycle of MaaS_ML. This workflow trigger three possible actions: Pause_MaaS_ML, Resume_MaaS_ML and Finish_MaaS_ML."><img src="/automation-dashboard/styles/patterns/img/wf-icons/model_as_service.png" width="20px">&nbsp;<span class="name">MaaS_ML_Actions</span></a></div><svg style="position:absolute;left:225.25px;top:750.25px" width="22" height="51" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 1 50 C 11 0 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M3.2572219999999983,36.86380000000001 L10.34829977977581,16.895910378881567 L3.321027335117191,22.86394539792608 L-3.6515548222981202,16.832105043764372 L3.2572219999999983,36.86380000000001" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M3.2572219999999983,36.86380000000001 L10.34829977977581,16.895910378881567 L3.321027335117191,22.86394539792608 L-3.6515548222981202,16.832105043764372 L3.2572219999999983,36.86380000000001" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:269.2766769263776px;top:750.25px" width="20.473323073622403" height="141" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 40 C -10 90 -10 -50 0 0 " transform="translate(19.973323073622403,50.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#316b31" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.4569999999999963,49.16001999999999 L-8.714346841294152,28.91537600442066 L-10.77778447022079,37.90104376767174 L-19.973323073622403,37.23616047464146 L-2.4569999999999963,49.16001999999999" class="" stroke="#316b31" fill="#316b31" transform="translate(19.973323073622403,50.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.4569999999999963,49.16001999999999 L-8.714346841294152,28.91537600442066 L-10.77778447022079,37.90104376767174 L-19.973323073622403,37.23616047464146 L-2.4569999999999963,49.16001999999999" class="" stroke="#316b31" fill="#316b31" transform="translate(19.973323073622403,50.5)"></path></svg><div class="_jsPlumb_overlay l1 component label" id="jsPlumb_1_1415" style="position: absolute; transform: translate(-50%, -50%); left: 281.25px; top: 820.25px;">loop</div><svg style="position:absolute;left:364.75px;top:548.25px" width="86" height="82" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 81 C -10 31 75 50 65 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M4.1902512499999975,57.76028775 L23.578136534132703,49.20985476626693 L14.414450464145466,48.19651493643594 L14.014363720568634,38.98565555212146 L4.1902512499999975,57.76028775" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M4.1902512499999975,57.76028775 L23.578136534132703,49.20985476626693 L14.414450464145466,48.19651493643594 L14.014363720568634,38.98565555212146 L4.1902512499999975,57.76028775" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:226.25px;top:840.25px" width="131.5" height="95.984375" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 110.5 94.984375 C 120.5 44.984375 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M97.919445375,67.42111686328124 L84.76930954298604,50.80564432713041 L86.09237557208978,59.929760518994236 L77.27795319869904,62.632714130040625 L97.919445375,67.42111686328124" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M97.919445375,67.42111686328124 L84.76930954298604,50.80564432713041 L86.09237557208978,59.929760518994236 L77.27795319869904,62.632714130040625 L97.919445375,67.42111686328124" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:386.75px;top:669.25px" width="49" height="266.984375" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 28 0 C 38 50 -10 215.984375 0 265.984375 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#316b31" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M25.889566499999997,59.86815675390626 L30.06552778314697,80.64221142220964 L23.959525969459733,73.73448083602953 L16.19920370102369,78.71217089166939 L25.889566499999997,59.86815675390626" class="" stroke="#316b31" fill="#316b31" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M25.889566499999997,59.86815675390626 L30.06552778314697,80.64221142220964 L23.959525969459733,73.73448083602953 L16.19920370102369,78.71217089166939 L25.889566499999997,59.86815675390626" class="" stroke="#316b31" fill="#316b31" transform="translate(10.5,0.5)"></path></svg><div class="_jsPlumb_overlay l1 component label" id="jsPlumb_1_1427" style="position: absolute; transform: translate(-50%, -50%); left: 410.75px; top: 802.242px;">loop</div><svg style="position:absolute;left:259.234375px;top:421.234375px" width="191.515625" height="88.015625" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 170.515625 87.015625 C 180.515625 37.015625 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M145.69968899609376,58.96356687109375 L129.15967491807274,45.71864579549398 L132.49432995989184,54.31399778084457 L124.51010582782358,58.92400483169589 L145.69968899609376,58.96356687109375" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M145.69968899609376,58.96356687109375 L129.15967491807274,45.71864579549398 L132.49432995989184,54.31399778084457 L124.51010582782358,58.92400483169589 L145.69968899609376,58.96356687109375" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:429.75px;top:174.234375px" width="87.484375" height="335.015625" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 334.015625 C -10 284.015625 76.484375 50 66.484375 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M9.202928906250001,260.51536690625 L20.584559755930215,242.64196546160025 L12.399506403654867,246.88518377090347 L6.954376620583688,239.4453879641954 L9.202928906250001,260.51536690625" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M9.202928906250001,260.51536690625 L20.584559755930215,242.64196546160025 L12.399506403654867,246.88518377090347 L6.954376620583688,239.4453879641954 L9.202928906250001,260.51536690625" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:486.234375px;top:54.25px" width="31" height="80.984375" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 10 79.984375 C 20 29.984375 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M12.04237,60.32386329296876 L15.699550658181401,39.452231118329806 L9.767516171884576,46.509919610561894 L1.8856069757745333,41.72708494644523 L12.04237,60.32386329296876" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M12.04237,60.32386329296876 L15.699550658181401,39.452231118329806 L9.767516171884576,46.509919610561894 L1.8856069757745333,41.72708494644523 L12.04237,60.32386329296876" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:355.25px;top:174.234375px" width="161.984375" height="72.015625" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 71.015625 C -10 21.015625 150.984375 50 140.984375 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M18.410976144531247,46.165628144531254 L39.595024472462256,46.65152570563189 L31.727571896888804,41.844947923976555 L35.27434425190755,33.33492995327433 L18.410976144531247,46.165628144531254" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M18.410976144531247,46.165628144531254 L39.595024472462256,46.65152570563189 L31.727571896888804,41.844947923976555 L35.27434425190755,33.33492995327433 L18.410976144531247,46.165628144531254" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:320.25px;top:96.234375px" width="56" height="150.015625" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 35 149.015625 C 45 99.015625 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M32.96824875,113.90316113671874 L33.714355016043456,92.72668065860881 L28.81148854429264,100.53449087403936 L20.345684753364083,96.88344086431619 L32.96824875,113.90316113671874" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M32.96824875,113.90316113671874 L33.714355016043456,92.72668065860881 L28.81148854429264,100.53449087403936 L20.345684753364083,96.88344086431619 L32.96824875,113.90316113671874" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:259.234375px;top:285.25px" width="117.015625" height="96.984375" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 95.984375 C -10 45.984375 106.015625 50 96.015625 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M10.032215468749998,68.74223846875 L30.257089343573867,62.42128310207742 L21.26497952001229,60.38610229413739 L21.90095316896125,51.188519050815124 L10.032215468749998,68.74223846875" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M10.032215468749998,68.74223846875 L30.257089343573867,62.42128310207742 L21.26497952001229,60.38610229413739 L21.90095316896125,51.188519050815124 L10.032215468749998,68.74223846875" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:167.25px;top:280.234375px" width="112.984375" height="102" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 91.984375 101 C 101.984375 51 -10 50 0 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M82.49382246874998,73.083934 L71.5443893566347,54.94254721388816 L71.70607820052895,64.16067374359908 L62.621129100233766,65.7302914821092 L82.49382246874998,73.083934" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M82.49382246874998,73.083934 L71.5443893566347,54.94254721388816 L71.70607820052895,64.16067374359908 L62.621129100233766,65.7302914821092 L82.49382246874998,73.083934" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><svg style="position:absolute;left:225.25px;top:660.25px" width="160.5" height="60" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 41 C -10 -9 149.5 50 139.5 0 " transform="translate(10.5,9.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M17.403264,20.821568 L38.11770011803811,25.28386968318081 L31.29490693541735,19.083104150830493 L36.3792362688686,11.39222674776346 L17.403264,20.821568" class="" stroke="#666" fill="#666" transform="translate(10.5,9.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M17.403264,20.821568 L38.11770011803811,25.28386968318081 L31.29490693541735,19.083104150830493 L36.3792362688686,11.39222674776346 L17.403264,20.821568" class="" stroke="#666" fill="#666" transform="translate(10.5,9.5)"></path></svg><svg style="position:absolute;left:335.25px;top:975.234375px" width="22.5" height="116.015625" pointer-events="none" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml" class="_jsPlumb_connector"><path d="M 0 115.015625 C -10 65.015625 11.5 50 1.5 0 " transform="translate(10.5,0.5)" pointer-events="visibleStroke" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="none" stroke="#666" style=""></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.721390375,88.07349055078126 L5.2692404405664615,68.44825630582714 L-2.0218276303382936,74.09097961868179 L-8.713270491533017,67.74869356116544 L-2.721390375,88.07349055078126" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path><path pointer-events="all" version="1.1" xmlns="http://www.w3.org/1999/xhtml" d="M-2.721390375,88.07349055078126 L5.2692404405664615,68.44825630582714 L-2.0218276303382936,74.09097961868179 L-8.713270491533017,67.74869356116544 L-2.721390375,88.07349055078126" class="" stroke="#666" fill="#666" transform="translate(10.5,0.5)"></path></svg><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 226.75px; top: 830.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 226.75px; top: 790.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint loop-source-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 279.25px; top: 790.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#316b31" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint loop-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 279.25px; top: 830.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#316b31" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 365.25px; top: 659.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 365.25px; top: 619.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint loop-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 415.25px; top: 659.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#316b31" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 337.25px; top: 965.734px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 337.25px; top: 925.734px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint loop-source-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected _jsPlumb_endpoint_full" style="position: absolute; height: 20px; width: 20px; left: 387.25px; top: 925.734px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#316b31" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 430.25px; top: 538.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 430.25px; top: 498.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 486.734px; top: 44.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 496.734px; top: 164.734px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 496.734px; top: 124.734px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 320.75px; top: 86.7344px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 355.75px; top: 275.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 355.75px; top: 235.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 167.75px; top: 270.734px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 259.734px; top: 411.734px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 259.734px; top: 371.734px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 225.75px; top: 740.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 225.75px; top: 700.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint source-endpoint dependency-source-endpoint connected _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable" style="position: absolute; height: 20px; width: 20px; left: 335.75px; top: 1120.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div><div class="_jsPlumb_endpoint target-endpoint dependency-target-endpoint _jsPlumb_endpoint_anchor_ ui-draggable ui-droppable _jsPlumb_endpoint_connected" style="position: absolute; height: 20px; width: 20px; left: 335.75px; top: 1080.75px;"><svg style="position:absolute;left:0px;top:0px" width="20" height="20" pointer-events="all" position="absolute" version="1.1" xmlns="http://www.w3.org/1999/xhtml"><circle cx="10" cy="10" r="10" version="1.1" xmlns="http://www.w3.org/1999/xhtml" fill="#666" stroke="none" style=""></circle></svg></div></div></div>
    </body>
</html>
 ]]>
    </visualization>
  </metadata>
</job>